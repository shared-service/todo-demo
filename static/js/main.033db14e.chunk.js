(this["webpackJsonp@shared-service/demo"]=this["webpackJsonp@shared-service/demo"]||[]).push([[0],{35:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(85),t)},52:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Transport=void 0;var i=o(r(88)),s=r(51),a=r(62),c=function(e){function t(t){var r=t.port,n=t.timeout,o=void 0===n?15e3:n,i=e.call(this)||this;return i._onMessage=function(e){var t=e.data;if(console.log(t),t.type!==i.events.request)if(t.type!==i.events.response)t.type===i.events.push&&i.emit(i.events.push,t.payload);else{var r=t.requestId;if(r&&i._requests.has(r)){var n=t.error;if(n)i._requests.get(r).reject(new Error(n));else{var o=t.result;i._requests.get(r).resolve(o)}}}else i.emit(i.events.request,{requestId:t.requestId,payload:t.payload})},i._timeout=o,i._port=r,i._requests=new Map,i._port.addEventListener("message",i._onMessage),i}return n(t,e),t.prototype.request=function(e){var t=this,r=e.payload,n=i.default.v4(),o=new Promise((function(e,o){t._requests.set(n,{resolve:e,reject:o}),t._port.postMessage({type:t.events.request,payload:r,requestId:n})})),s=setTimeout((function(){s=null,t._requests.get(n).reject(new Error(t.events.timeout))}),this._timeout);return o=o.then((function(e){return void 0!==s&&null!==s&&clearTimeout(s),t._requests.delete(n),Promise.resolve(e)})).catch((function(e){return void 0!==s&&null!==s&&clearTimeout(s),t._requests.delete(n),Promise.reject(e)}))},t.prototype.response=function(e){var t=e.requestId,r=e.result,n=e.error;this._port.postMessage({type:this.events.response,requestId:t,result:r,error:n})},t.prototype.push=function(e){var t=e.payload;this._port.postMessage({type:this.events.push,payload:t})},t.prototype.dispose=function(){this._requests=new Map,this._port.removeEventListener("message",this._onMessage)},Object.defineProperty(t.prototype,"events",{get:function(){return a.eventTypes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"port",{get:function(){return this._port},enumerable:!1,configurable:!0}),t}(s.EventEmitter);t.Transport=c},62:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.eventTypes=void 0,t.eventTypes={close:"shared/close",request:"shared/request",response:"shared/response",push:"shared/push",timeout:"shared/timeout"}},63:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.SharedServiceServer=void 0;var o=function(e){function t(t){var r=e.call(this)||this;return r._transports=[],r._state=t||{},r}return n(t,e),t.prototype._handleRequest=function(e,t){var r=t.payload;if("getState"!==r.action){if("setState"===r.action)return this.setState(r.key,r.state),void e.response({requestId:t.requestId,result:"ok",error:null})}else{var n=this.getState(r.key);e.response({requestId:t.requestId,result:n,error:null})}},t.prototype.getState=function(e){return this._state[e]},t.prototype.setState=function(e,t){"string"===typeof e&&(this._state[e]=t,this._transports.forEach((function(r){r.push({payload:{action:"setState",key:e,state:t}})})),this.emit("stateChange",{key:e,state:t}))},t}(r(51).EventEmitter);t.SharedServiceServer=o},69:function(e,t,r){"use strict";var n=r(38),o=r(68),i=r(29),s=r(0),a=r(39),c=r(149),u=r(151),l=r(152),p=r(150),f=r(153),d=r(148),h=r(146),v=r(138),y=r(35),b=r(141),_=r(143),j=r(147),O=r(145),m=r(154),g=r(144),S=r(67),x=r.n(S),w=r(66),k=r.n(w),q=r(65),P=r.n(q),C=r(7),T=Object(v.a)({itemText:{paddingRight:"50px"},text:{cursor:"pointer"}});var M=function(e){var t=e.name,r=e.completed,n=e.handleCompleteChange,o=e.deleteTask,c=e.editTask,u=T(),p=Object(s.useState)(!1),f=Object(i.a)(p,2),d=f[0],h=f[1],v=Object(s.useState)(t),y=Object(i.a)(v,2),S=y[0],w=y[1],q=function(){S&&(S!==t&&c(S),h(!1))};return Object(C.jsxs)(b.a,{children:[Object(C.jsx)(_.a,{children:Object(C.jsx)(m.a,{edge:"start",checked:r,tabIndex:-1,disableRipple:!0,onChange:n})}),Object(C.jsx)(O.a,{className:u.itemText,children:d?Object(C.jsx)(l.a,{variant:"outlined",multiline:!0,fullWidth:!0,onChange:function(e){w(e.target.value)},value:S}):Object(C.jsx)(a.a,{onClick:function(){return h(!0)},className:u.text,children:t})}),Object(C.jsx)(j.a,{children:d?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(g.a,{edge:"end","aria-label":"Cancel",onClick:q,children:Object(C.jsx)(P.a,{})}),Object(C.jsx)(g.a,{edge:"end","aria-label":"Save",onClick:q,children:Object(C.jsx)(k.a,{})})]}):Object(C.jsx)(g.a,{edge:"end","aria-label":"Delete",onClick:o,children:Object(C.jsx)(x.a,{})})})]})},E=Object(v.a)({root:{paddingTop:"20px",display:"flex",flexDirection:"column",minHeight:"100%"},form:{paddingTop:"20px",display:"flex",flexDirection:"column",alignItems:"flex-end"},remaining:{padding:"20px 0"},list:{flex:1}}),I={All:function(){return!0},Active:function(e){return!e.completed},Completed:function(e){return e.completed}},A=Object.keys(I);t.a=function(){var e=Object(y.useSharedState)("tasks",[]),t=Object(i.a)(e,2),r=t[0],v=t[1],b=Object(y.useSharedState)("taskInput",""),_=Object(i.a)(b,2),j=_[0],O=_[1],m=Object(s.useState)(0),g=Object(i.a)(m,2),S=g[0],x=g[1],w=E(),k=r.filter(I[A[S]]),q=k.map((function(e){return Object(C.jsx)(M,{name:e.name,completed:e.completed,handleCompleteChange:function(t){!function(e,t){var o=r.map((function(r){return e===r.id?Object(n.a)(Object(n.a)({},r),{},{completed:t}):r}));v(o)}(e.id,t.target.checked)},deleteTask:function(){!function(e){var t=r.filter((function(t){return e!==t.id}));v(t)}(e.id)},editTask:function(t){!function(e,t){var o=r.map((function(r){return e===r.id?Object(n.a)(Object(n.a)({},r),{},{name:t}):r}));v(o)}(e.id,t)}},e.id)})),P=A.map((function(e){return Object(C.jsx)(d.a,{label:e},e)}));return Object(C.jsxs)(c.a,{maxWidth:"sm",className:w.root,children:[Object(C.jsx)(a.a,{variant:"h4",component:"h1",children:"My TODO List"}),Object(C.jsxs)("form",{className:w.form,children:[Object(C.jsx)(l.a,{value:j,onChange:function(e){O(e.target.value)},label:"TODO",placeholder:"What needs to be done?",fullWidth:!0,multiline:!0,minRows:3,maxRows:10,margin:"normal",variant:"outlined"}),Object(C.jsx)(p.a,{variant:"contained",color:"primary",onClick:function(){if(j){var e={id:Date.now(),name:j,completed:!1};v([].concat(Object(o.a)(r),[e])),O("")}},children:"Add"})]}),Object(C.jsx)(f.a,{value:S,indicatorColor:"primary",textColor:"primary",onChange:function(e,t){x(t)},"aria-label":"TODO filter",children:P}),Object(C.jsxs)(a.a,{variant:"h6",component:"h6",className:w.remaining,children:[k.length," tasks remaining"]}),Object(C.jsx)(h.a,{className:w.list,children:q}),Object(C.jsxs)(a.a,{variant:"body2",color:"textSecondary",align:"center",children:["Powered by \xa0",Object(C.jsx)(u.a,{href:"https://github.com/shared-service/shared-service",target:"_blank",children:"Shared Service"})]})]})}},71:function(e,t,r){"use strict";r.r(t),function(e){var t=r(0),n=r.n(t),o=r(10),i=r.n(o),s=r(35),a=r(69),c=r(7),u=new SharedWorker(e,void 0);Object(s.initSharedService)(u),i.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(a.a,{})}),document.getElementById("root"))}.call(this,r(80))},80:function(e,t,r){e.exports=r.p+"static/js/0.a5f3fb72.chunk.worker.js"},85:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSharedState=t.initSharedService=void 0;var n,o=r(0),i=r(86);t.initSharedService=function(e){n=new i.SharedServiceClient({worker:e})},t.useSharedState=function(e,t){var r=o.useState(t),i=r[0],s=r[1];return o.useEffect((function(){if(!n)throw new Error("Share service is not initialized.");n.getState(e).then((function(e){e&&s(e)})).catch((function(e){console.error(e)}));var t=function(e){s(e)};return n.on(e,t),function(){n.off(e,t)}}),[]),[i,function(t){return n.setState(e,t)}]}},86:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(87),t),o(r(63),t),o(r(91),t),o(r(62),t),o(r(92),t),o(r(52),t)},87:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(t){i(t)}}function a(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(a){i=[6,a],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SharedServiceClient=void 0;var s=r(51),a=r(52),c=function(e){function t(t){var r=t.worker,n=e.call(this)||this;return n._worker=r,n._transport=new a.Transport({port:r.port}),n._transport.on(n._transport.events.push,(function(e){"setState"===e.action&&n.emit(e.key,e.state)})),r.port.start(),n}return n(t,e),t.prototype.setState=function(e,t){return o(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,this._transport.request({payload:{action:"setState",key:e,state:t}})];case 1:return r.sent(),[2]}}))}))},t.prototype.getState=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this._transport.request({payload:{action:"getState",key:e}})];case 1:return[2,t.sent()]}}))}))},t}(s.EventEmitter);t.SharedServiceClient=c},91:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.SharedServiceWorker=void 0;var o=r(52),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onConnect=function(e){var t=this,r=e.ports[0],n=new o.Transport({port:r});this._transports.push(n),n.on(n.events.push,(function(e){"close"===e.action&&(t._transports=t._transports.filter((function(e){return e!==n})),n.removeAllListeners(),n.dispose())})),n.on(n.events.request,(function(e){t._handleRequest(n,e)})),r.start()},t}(r(63).SharedServiceServer);t.SharedServiceWorker=i},92:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}},[[71,1,2]]]);
//# sourceMappingURL=main.033db14e.chunk.js.map