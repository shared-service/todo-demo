{"version":3,"sources":["../webpack/bootstrap","../../../node_modules/events/events.js","../../src/actionTypes.ts","../../src/Transport.ts","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../../../node_modules/uuid/lib/rng-browser.js","../../../node_modules/uuid/lib/bytesToUuid.js","../../src/eventTypes.ts","../../src/SharedServiceServer.ts","../../src/ClientPort.ts","../../src/index.ts","../../../node_modules/localforage/dist/localforage.js","../../../node_modules/regenerator-runtime/runtime.js","../../src/SharedServiceClient.ts","../../../node_modules/uuid/index.js","../../../node_modules/uuid/v1.js","../../../node_modules/uuid/v4.js","../../src/SharedServiceWorker.ts","../../../node_modules/webpack/buildin/global.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","worker.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","EventEmitter","init","this","once","emitter","Promise","resolve","reject","errorListener","err","removeListener","resolver","slice","arguments","eventTargetAgnosticAddListener","handler","flags","on","addErrorHandlerIfEventEmitter","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","type","prepend","events","existing","warning","newListener","emit","unshift","push","length","warned","w","Error","String","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","arr","ret","Array","unwrapListeners","arrayClone","listenerCount","copy","addEventListener","wrapListener","arg","removeEventListener","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","message","context","len","listeners","addListener","prependListener","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","keys","rawListeners","eventNames","e","Transport","getRandomValues","crypto","msCrypto","window","rnds8","Uint8Array","rnds","Math","random","byteToHex","toString","substr","buf","offset","bth","join","SharedServiceServer","actionTypes_1","actionTypes","u","f","code","1","_dereq_","global","scheduleDrain","draining","Mutation","MutationObserver","WebKitMutationObserver","called","observer","nextTick","element","document","createTextNode","observe","characterData","data","setImmediate","MessageChannel","createElement","scriptEl","onreadystatechange","parentNode","removeChild","documentElement","appendChild","setTimeout","channel","port1","onmessage","port2","postMessage","queue","oldQueue","immediate","task","self","2","INTERNAL","handlers","REJECTED","FULFILLED","PENDING","outcome","safelyResolveThenable","QueueItem","promise","onFulfilled","onRejected","callFulfilled","otherCallFulfilled","callRejected","otherCallRejected","func","returnValue","getThen","obj","then","thenable","onError","onSuccess","tryToUnwrap","result","tryCatch","status","out","reason","all","iterable","values","resolved","allResolver","resolveFromAll","outValue","race","response","constructor","3","4","_typeof","iterator","_classCallCheck","instance","Constructor","getIDB","indexedDB","webkitIndexedDB","mozIndexedDB","OIndexedDB","msIndexedDB","idb","isIndexedDBValid","open","isSafari","openDatabase","test","navigator","userAgent","platform","hasFetch","fetch","indexOf","IDBKeyRange","createBlob","parts","properties","Blob","builder","BlobBuilder","MSBlobBuilder","MozBlobBuilder","WebKitBlobBuilder","append","getBlob","Promise$1","executeCallback","callback","executeTwoCallbacks","errorCallback","normalizeKey","getCallback","DETECT_BLOB_SUPPORT_STORE","supportsBlobs","dbContexts","READ_ONLY","READ_WRITE","_binStringToArrayBuffer","bin","ArrayBuffer","charCodeAt","_checkBlobSupportWithoutCaching","txn","transaction","blob","objectStore","put","onabort","preventDefault","stopPropagation","oncomplete","matchedChrome","match","matchedEdge","parseInt","_checkBlobSupport","_deferReadiness","dbInfo","dbContext","deferredOperation","deferredOperations","dbReady","_advanceReadiness","_rejectReadiness","_getConnection","upgradeNeeded","createDbContext","db","close","dbArgs","version","openreq","onupgradeneeded","createObjectStore","storeName","oldVersion","ex","newVersion","onerror","onsuccess","_getOriginalConnection","_getUpgradedConnection","_isUpgradeNeeded","defaultVersion","isNewStore","objectStoreNames","contains","isDowngrade","isUpgrade","incVersion","_encodeBlob","reader","FileReader","onloadend","base64","btoa","__local_forage_encoded_blob","readAsBinaryString","_decodeBlob","encodedBlob","atob","_isEncodedBlob","_fullyReady","_initReady","_dbInfo","_tryReconnect","forages","forage","createTransaction","retries","tx","_initStorage","options","ready","initPromises","ignoreErrors","j","_defaultConfig","k","getItem","req","iterate","openCursor","iterationNumber","cursor","setItem","blobSupport","store","removeItem","clear","advanced","openKeyCursor","advance","dropInstance","currentConfig","config","dbPromise","deleteObjectStore","_forage2","deleteDatabase","onblocked","asyncStorage","_driver","_support","isWebSQLValid","BASE_CHARS","BLOB_TYPE_PREFIX","BLOB_TYPE_PREFIX_REGEX","SERIALIZED_MARKER","SERIALIZED_MARKER_LENGTH","TYPE_ARRAYBUFFER","TYPE_BLOB","TYPE_INT8ARRAY","TYPE_UINT8ARRAY","TYPE_UINT8CLAMPEDARRAY","TYPE_INT16ARRAY","TYPE_INT32ARRAY","TYPE_UINT16ARRAY","TYPE_UINT32ARRAY","TYPE_FLOAT32ARRAY","TYPE_FLOAT64ARRAY","TYPE_SERIALIZED_MARKER_LENGTH","toString$1","stringToBuffer","serializedString","encoded1","encoded2","encoded3","encoded4","bufferLength","buffer","bytes","bufferToString","base64String","substring","serialize","valueType","marker","fileReader","onload","str","readAsArrayBuffer","JSON","stringify","deserialize","parse","blobType","matcher","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","localforageSerializer","createDbTable","executeSql","_initStorage$1","dbInfoPromise","description","size","serializer","tryExecuteSql","sqlStatement","SYNTAX_ERR","results","rows","getItem$1","item","iterate$1","_setItem","retriesLeft","originalValue","sqlError","QUOTA_ERR","setItem$1","removeItem$1","clear$1","length$1","key$1","keys$1","getAllStoreNames","storeNames","dropInstance$1","operationInfo","dropTable","operations","webSQLStorage","isLocalStorageValid","localStorage","_getKeyPrefix","defaultConfig","keyPrefix","checkIfLocalStorageThrows","localStorageTestKey","_isLocalStorageUsable","_initStorage$2","clear$2","getItem$2","iterate$2","keyPrefixLength","key$2","keys$2","itemKey","length$2","removeItem$2","setItem$2","dropInstance$2","localStorageWrapper","sameValue","x","y","includes","array","searchElement","isArray","DefinedDrivers","DriverSupport","DefaultDrivers","INDEXEDDB","WEBSQL","LOCALSTORAGE","DefaultDriverOrder","OptionalDriverMethods","LibraryMethods","DefaultConfig","driver","callWhenReady","localForageInstance","libraryMethod","_args","extend","_key","localforage_js","LocalForage","driverTypeKey","driverName","defineDriver","_config","_driverSet","_initDriver","_ready","_wrapLibraryMethodsWithReady","setDriver","replace","driverObject","complianceError","driverMethods","driverMethodName","methodNotImplementedFactory","methodName","_i","_len","optionalDriverMethod","configureMissingMethods","setDriverSupport","support","info","getDriver","getDriverPromise","getSerializer","serializerPromise","drivers","supportedDrivers","_getSupportedDrivers","setDriverToConfig","extendSelfWithDriver","_extend","initDriver","currentDriverIndex","driverPromiseLoop","oldDriverSetDone","supports","libraryMethodsAndProperties","createInstance","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","define","configurable","writable","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","_invoke","GenStateSuspendedStart","method","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","done","GenStateSuspendedYield","makeInvokeMethod","fn","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","invoke","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","iter","reverse","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","v1","require","v4","uuid","_nodeId","_clockseq","rng","bytesToUuid","_lastMSecs","_lastNSecs","b","node","clockseq","seedBytes","msecs","Date","getTime","nsecs","dt","tl","tmh","ii","g","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","_defineProperty","enumerableOnly","symbols","filter","sym","getOwnPropertyDescriptor","_objectSpread2","source","getOwnPropertyDescriptors","defineProperties","_arrayLikeToArray","arr2","_toConsumableArray","from","minLen","sharedServiceServer","tasks","id","completed","taskInput","a","storage","localforage","promises","newTask","updatedTasks","remainingTasks","editedTaskList","initStorage"],"mappings":"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","file":"static/js/0.8da25be0.chunk.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/todo-demo/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 19);\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.actionTypes = void 0;\nexports.actionTypes = {\n    close: 'action/close',\n    getState: 'action/getState',\n    setState: 'action/setState',\n    unsubscribe: 'action/unsubscribe',\n    execute: 'action/execute',\n};\n//# sourceMappingURL=actionTypes.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Transport = void 0;\nvar uuid_1 = __importDefault(require(\"uuid\"));\nvar events_1 = require(\"events\");\nvar eventTypes_1 = require(\"./eventTypes\");\nvar Transport = /** @class */ (function (_super) {\n    __extends(Transport, _super);\n    function Transport(_a) {\n        var port = _a.port, _b = _a.timeout, timeout = _b === void 0 ? 15 * 1000 : _b;\n        var _this = _super.call(this) || this;\n        _this._onMessage = function (e) {\n            var data = e.data;\n            // console.log(data);\n            if (data.type === _this.events.request) {\n                _this.emit(_this.events.request, { requestId: data.requestId, payload: data.payload });\n                return;\n            }\n            if (data.type === _this.events.response) {\n                var requestId = data.requestId;\n                if (requestId && _this._requests.has(requestId)) {\n                    var error = data.error;\n                    if (error) {\n                        _this._requests.get(requestId).reject(new Error(error));\n                    }\n                    else {\n                        var result = data.result;\n                        _this._requests.get(requestId).resolve(result);\n                    }\n                }\n                return;\n            }\n            if (data.type === _this.events.push) {\n                _this.emit(_this.events.push, data.payload);\n            }\n        };\n        _this._timeout = timeout;\n        _this._port = port;\n        _this._requests = new Map();\n        _this._port.addEventListener('message', _this._onMessage);\n        return _this;\n    }\n    Transport.prototype.request = function (_a) {\n        var _this = this;\n        var payload = _a.payload;\n        var requestId = uuid_1.default.v4();\n        var promise = new Promise(function (resolve, reject) {\n            _this._requests.set(requestId, {\n                resolve: resolve,\n                reject: reject,\n            });\n            _this._port.postMessage({\n                type: _this.events.request,\n                payload: payload,\n                requestId: requestId,\n            });\n        });\n        var timeout = setTimeout(function () {\n            timeout = null;\n            _this._requests.get(requestId).reject(new Error(_this.events.timeout));\n        }, this._timeout);\n        promise = promise\n            .then(function (result) {\n            if (timeout !== undefined && timeout !== null)\n                clearTimeout(timeout);\n            _this._requests.delete(requestId);\n            return Promise.resolve(result);\n        })\n            .catch(function (error) {\n            if (timeout !== undefined && timeout !== null)\n                clearTimeout(timeout);\n            _this._requests.delete(requestId);\n            return Promise.reject(error);\n        });\n        return promise;\n    };\n    Transport.prototype.response = function (_a) {\n        var requestId = _a.requestId, result = _a.result, error = _a.error;\n        this._port.postMessage({\n            type: this.events.response,\n            requestId: requestId,\n            result: result,\n            error: error,\n        });\n    };\n    Transport.prototype.push = function (_a) {\n        var payload = _a.payload;\n        this._port.postMessage({\n            type: this.events.push,\n            payload: payload,\n        });\n    };\n    Transport.prototype.dispose = function () {\n        this._requests = new Map();\n        ;\n        this._port.removeEventListener('message', this._onMessage);\n    };\n    Object.defineProperty(Transport.prototype, \"events\", {\n        get: function () {\n            return eventTypes_1.eventTypes;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Transport.prototype, \"port\", {\n        get: function () {\n            return this._port;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Transport;\n}(events_1.EventEmitter));\nexports.Transport = Transport;\n//# sourceMappingURL=Transport.js.map","module.exports = require(\"regenerator-runtime\");\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.eventTypes = void 0;\nexports.eventTypes = {\n    request: 'transport/request',\n    response: 'transport/response',\n    push: 'transport/push',\n    timeout: 'transport/timeout',\n};\n//# sourceMappingURL=eventTypes.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SharedServiceServer = void 0;\nvar events_1 = require(\"events\");\nvar ClientPort_1 = require(\"./ClientPort\");\nvar actionTypes_1 = require(\"./actionTypes\");\nvar SharedServiceServer = /** @class */ (function (_super) {\n    __extends(SharedServiceServer, _super);\n    function SharedServiceServer(initState) {\n        var _this = _super.call(this) || this;\n        _this._ports = [];\n        _this._executors = {};\n        _this._state = initState || {};\n        return _this;\n    }\n    SharedServiceServer.prototype.onNewPort = function (rawPort) {\n        var _this = this;\n        var port = new ClientPort_1.ClientPort(rawPort);\n        this._ports.push(port);\n        port.on(actionTypes_1.actionTypes.close, function () {\n            _this._ports = _this._ports.filter(function (p) { return p !== port; });\n            port.removeAllListeners();\n            port.dispose();\n        });\n        port.on(actionTypes_1.actionTypes.getState, function (_a) {\n            var key = _a.key, requestId = _a.requestId;\n            var state = _this.getState(key);\n            port.response({ requestId: requestId, result: state, error: null });\n        });\n        port.on(actionTypes_1.actionTypes.setState, function (_a) {\n            var key = _a.key, state = _a.state, requestId = _a.requestId;\n            _this.setState(key, state);\n            port.response({ requestId: requestId, result: 'ok', error: null });\n        });\n        port.on(actionTypes_1.actionTypes.execute, function (_a) {\n            var funcName = _a.funcName, args = _a.args, requestId = _a.requestId;\n            return __awaiter(_this, void 0, void 0, function () {\n                var executor, result, error, e_1;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            executor = this._executors[funcName];\n                            if (!executor) {\n                                port.response({ requestId: requestId, result: null, error: 'Function not found' });\n                                return [2 /*return*/];\n                            }\n                            _b.label = 1;\n                        case 1:\n                            _b.trys.push([1, 3, , 4]);\n                            return [4 /*yield*/, executor.apply(void 0, args)];\n                        case 2:\n                            result = _b.sent();\n                            return [3 /*break*/, 4];\n                        case 3:\n                            e_1 = _b.sent();\n                            error = e_1.message;\n                            return [3 /*break*/, 4];\n                        case 4:\n                            port.response({ requestId: requestId, result: result, error: error });\n                            return [2 /*return*/];\n                    }\n                });\n            });\n        });\n    };\n    SharedServiceServer.prototype.getState = function (key) {\n        return this._state[key];\n    };\n    SharedServiceServer.prototype.setState = function (key, state) {\n        if (typeof key !== 'string') {\n            return;\n        }\n        this._state[key] = state;\n        this._ports.forEach(function (port) {\n            port.pushState(key, state);\n        });\n        this.emit('stateChange', { key: key, state: state });\n    };\n    SharedServiceServer.prototype.registerExecutor = function (funcName, func) {\n        if (this._executors[funcName]) {\n            throw new Error(funcName + \" is registered.\");\n        }\n        this._executors[funcName] = func;\n    };\n    SharedServiceServer.prototype.unregisterExecutor = function (funcName) {\n        delete this._executors[funcName];\n    };\n    SharedServiceServer.prototype.dispose = function () {\n        this._executors = {};\n        this._ports.forEach(function (port) {\n            port.removeAllListeners();\n            port.dispose();\n        });\n        this._ports = [];\n    };\n    return SharedServiceServer;\n}(events_1.EventEmitter));\nexports.SharedServiceServer = SharedServiceServer;\n//# sourceMappingURL=SharedServiceServer.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ClientPort = void 0;\nvar events_1 = require(\"events\");\nvar Transport_1 = require(\"./Transport\");\nvar actionTypes_1 = require(\"./actionTypes\");\nvar ClientPort = /** @class */ (function (_super) {\n    __extends(ClientPort, _super);\n    function ClientPort(port) {\n        var _this = _super.call(this) || this;\n        _this._subscribedStateKeys = {};\n        _this._transport = new Transport_1.Transport({ port: port });\n        _this._transport.on(_this._transport.events.push, function (message) {\n            if (message.action === actionTypes_1.actionTypes.close) {\n                _this.emit(actionTypes_1.actionTypes.close);\n            }\n            if (message.action === actionTypes_1.actionTypes.unsubscribe) {\n                delete _this._subscribedStateKeys[message.key];\n            }\n        });\n        _this._transport.on(_this._transport.events.request, function (request) {\n            _this._handleRequest(request);\n        });\n        port.start();\n        return _this;\n    }\n    ClientPort.prototype._handleRequest = function (request) {\n        var payload = request.payload;\n        if (payload.action === actionTypes_1.actionTypes.getState) {\n            this._subscribedStateKeys[payload.key] = true;\n            this.emit(actionTypes_1.actionTypes.getState, {\n                key: payload.key,\n                requestId: request.requestId,\n            });\n            return;\n        }\n        if (payload.action === actionTypes_1.actionTypes.setState) {\n            this.emit(actionTypes_1.actionTypes.setState, {\n                key: payload.key,\n                state: payload.state,\n                requestId: request.requestId,\n            });\n            return;\n        }\n        if (payload.action === actionTypes_1.actionTypes.execute) {\n            this.emit(actionTypes_1.actionTypes.execute, {\n                funcName: payload.funcName,\n                args: payload.args,\n                requestId: request.requestId,\n            });\n        }\n    };\n    ClientPort.prototype.response = function (_a) {\n        var requestId = _a.requestId, result = _a.result, error = _a.error;\n        this._transport.response({ requestId: requestId, result: result, error: error });\n    };\n    ClientPort.prototype.dispose = function () {\n        this._transport.removeAllListeners();\n        this._transport.dispose();\n        this._transport = null;\n    };\n    ClientPort.prototype.pushState = function (key, state) {\n        if (!this._subscribedStateKeys[key]) {\n            return;\n        }\n        this._transport.push({\n            payload: {\n                action: actionTypes_1.actionTypes.setState,\n                key: key,\n                state: state,\n            },\n        });\n    };\n    return ClientPort;\n}(events_1.EventEmitter));\nexports.ClientPort = ClientPort;\n//# sourceMappingURL=ClientPort.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./SharedServiceClient\"), exports);\n__exportStar(require(\"./SharedServiceServer\"), exports);\n__exportStar(require(\"./SharedServiceWorker\"), exports);\n__exportStar(require(\"./ClientPort\"), exports);\n__exportStar(require(\"./actionTypes\"), exports);\n__exportStar(require(\"./eventTypes\"), exports);\n__exportStar(require(\"./interfaces\"), exports);\n__exportStar(require(\"./Transport\"), exports);\n//# sourceMappingURL=index.js.map","/*!\n    localForage -- Offline Storage, Improved\n    Version 1.9.0\n    https://localforage.github.io/localForage\n    (c) 2013-2017 Mozilla, Apache License 2.0\n*/\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.localforage = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw (f.code=\"MODULE_NOT_FOUND\", f)}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n(function (global){\n'use strict';\nvar Mutation = global.MutationObserver || global.WebKitMutationObserver;\n\nvar scheduleDrain;\n\n{\n  if (Mutation) {\n    var called = 0;\n    var observer = new Mutation(nextTick);\n    var element = global.document.createTextNode('');\n    observer.observe(element, {\n      characterData: true\n    });\n    scheduleDrain = function () {\n      element.data = (called = ++called % 2);\n    };\n  } else if (!global.setImmediate && typeof global.MessageChannel !== 'undefined') {\n    var channel = new global.MessageChannel();\n    channel.port1.onmessage = nextTick;\n    scheduleDrain = function () {\n      channel.port2.postMessage(0);\n    };\n  } else if ('document' in global && 'onreadystatechange' in global.document.createElement('script')) {\n    scheduleDrain = function () {\n\n      // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n      // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n      var scriptEl = global.document.createElement('script');\n      scriptEl.onreadystatechange = function () {\n        nextTick();\n\n        scriptEl.onreadystatechange = null;\n        scriptEl.parentNode.removeChild(scriptEl);\n        scriptEl = null;\n      };\n      global.document.documentElement.appendChild(scriptEl);\n    };\n  } else {\n    scheduleDrain = function () {\n      setTimeout(nextTick, 0);\n    };\n  }\n}\n\nvar draining;\nvar queue = [];\n//named nextTick for less confusing stack traces\nfunction nextTick() {\n  draining = true;\n  var i, oldQueue;\n  var len = queue.length;\n  while (len) {\n    oldQueue = queue;\n    queue = [];\n    i = -1;\n    while (++i < len) {\n      oldQueue[i]();\n    }\n    len = queue.length;\n  }\n  draining = false;\n}\n\nmodule.exports = immediate;\nfunction immediate(task) {\n  if (queue.push(task) === 1 && !draining) {\n    scheduleDrain();\n  }\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],2:[function(_dereq_,module,exports){\n'use strict';\nvar immediate = _dereq_(1);\n\n/* istanbul ignore next */\nfunction INTERNAL() {}\n\nvar handlers = {};\n\nvar REJECTED = ['REJECTED'];\nvar FULFILLED = ['FULFILLED'];\nvar PENDING = ['PENDING'];\n\nmodule.exports = Promise;\n\nfunction Promise(resolver) {\n  if (typeof resolver !== 'function') {\n    throw new TypeError('resolver must be a function');\n  }\n  this.state = PENDING;\n  this.queue = [];\n  this.outcome = void 0;\n  if (resolver !== INTERNAL) {\n    safelyResolveThenable(this, resolver);\n  }\n}\n\nPromise.prototype[\"catch\"] = function (onRejected) {\n  return this.then(null, onRejected);\n};\nPromise.prototype.then = function (onFulfilled, onRejected) {\n  if (typeof onFulfilled !== 'function' && this.state === FULFILLED ||\n    typeof onRejected !== 'function' && this.state === REJECTED) {\n    return this;\n  }\n  var promise = new this.constructor(INTERNAL);\n  if (this.state !== PENDING) {\n    var resolver = this.state === FULFILLED ? onFulfilled : onRejected;\n    unwrap(promise, resolver, this.outcome);\n  } else {\n    this.queue.push(new QueueItem(promise, onFulfilled, onRejected));\n  }\n\n  return promise;\n};\nfunction QueueItem(promise, onFulfilled, onRejected) {\n  this.promise = promise;\n  if (typeof onFulfilled === 'function') {\n    this.onFulfilled = onFulfilled;\n    this.callFulfilled = this.otherCallFulfilled;\n  }\n  if (typeof onRejected === 'function') {\n    this.onRejected = onRejected;\n    this.callRejected = this.otherCallRejected;\n  }\n}\nQueueItem.prototype.callFulfilled = function (value) {\n  handlers.resolve(this.promise, value);\n};\nQueueItem.prototype.otherCallFulfilled = function (value) {\n  unwrap(this.promise, this.onFulfilled, value);\n};\nQueueItem.prototype.callRejected = function (value) {\n  handlers.reject(this.promise, value);\n};\nQueueItem.prototype.otherCallRejected = function (value) {\n  unwrap(this.promise, this.onRejected, value);\n};\n\nfunction unwrap(promise, func, value) {\n  immediate(function () {\n    var returnValue;\n    try {\n      returnValue = func(value);\n    } catch (e) {\n      return handlers.reject(promise, e);\n    }\n    if (returnValue === promise) {\n      handlers.reject(promise, new TypeError('Cannot resolve promise with itself'));\n    } else {\n      handlers.resolve(promise, returnValue);\n    }\n  });\n}\n\nhandlers.resolve = function (self, value) {\n  var result = tryCatch(getThen, value);\n  if (result.status === 'error') {\n    return handlers.reject(self, result.value);\n  }\n  var thenable = result.value;\n\n  if (thenable) {\n    safelyResolveThenable(self, thenable);\n  } else {\n    self.state = FULFILLED;\n    self.outcome = value;\n    var i = -1;\n    var len = self.queue.length;\n    while (++i < len) {\n      self.queue[i].callFulfilled(value);\n    }\n  }\n  return self;\n};\nhandlers.reject = function (self, error) {\n  self.state = REJECTED;\n  self.outcome = error;\n  var i = -1;\n  var len = self.queue.length;\n  while (++i < len) {\n    self.queue[i].callRejected(error);\n  }\n  return self;\n};\n\nfunction getThen(obj) {\n  // Make sure we only access the accessor once as required by the spec\n  var then = obj && obj.then;\n  if (obj && (typeof obj === 'object' || typeof obj === 'function') && typeof then === 'function') {\n    return function appyThen() {\n      then.apply(obj, arguments);\n    };\n  }\n}\n\nfunction safelyResolveThenable(self, thenable) {\n  // Either fulfill, reject or reject with error\n  var called = false;\n  function onError(value) {\n    if (called) {\n      return;\n    }\n    called = true;\n    handlers.reject(self, value);\n  }\n\n  function onSuccess(value) {\n    if (called) {\n      return;\n    }\n    called = true;\n    handlers.resolve(self, value);\n  }\n\n  function tryToUnwrap() {\n    thenable(onSuccess, onError);\n  }\n\n  var result = tryCatch(tryToUnwrap);\n  if (result.status === 'error') {\n    onError(result.value);\n  }\n}\n\nfunction tryCatch(func, value) {\n  var out = {};\n  try {\n    out.value = func(value);\n    out.status = 'success';\n  } catch (e) {\n    out.status = 'error';\n    out.value = e;\n  }\n  return out;\n}\n\nPromise.resolve = resolve;\nfunction resolve(value) {\n  if (value instanceof this) {\n    return value;\n  }\n  return handlers.resolve(new this(INTERNAL), value);\n}\n\nPromise.reject = reject;\nfunction reject(reason) {\n  var promise = new this(INTERNAL);\n  return handlers.reject(promise, reason);\n}\n\nPromise.all = all;\nfunction all(iterable) {\n  var self = this;\n  if (Object.prototype.toString.call(iterable) !== '[object Array]') {\n    return this.reject(new TypeError('must be an array'));\n  }\n\n  var len = iterable.length;\n  var called = false;\n  if (!len) {\n    return this.resolve([]);\n  }\n\n  var values = new Array(len);\n  var resolved = 0;\n  var i = -1;\n  var promise = new this(INTERNAL);\n\n  while (++i < len) {\n    allResolver(iterable[i], i);\n  }\n  return promise;\n  function allResolver(value, i) {\n    self.resolve(value).then(resolveFromAll, function (error) {\n      if (!called) {\n        called = true;\n        handlers.reject(promise, error);\n      }\n    });\n    function resolveFromAll(outValue) {\n      values[i] = outValue;\n      if (++resolved === len && !called) {\n        called = true;\n        handlers.resolve(promise, values);\n      }\n    }\n  }\n}\n\nPromise.race = race;\nfunction race(iterable) {\n  var self = this;\n  if (Object.prototype.toString.call(iterable) !== '[object Array]') {\n    return this.reject(new TypeError('must be an array'));\n  }\n\n  var len = iterable.length;\n  var called = false;\n  if (!len) {\n    return this.resolve([]);\n  }\n\n  var i = -1;\n  var promise = new this(INTERNAL);\n\n  while (++i < len) {\n    resolver(iterable[i]);\n  }\n  return promise;\n  function resolver(value) {\n    self.resolve(value).then(function (response) {\n      if (!called) {\n        called = true;\n        handlers.resolve(promise, response);\n      }\n    }, function (error) {\n      if (!called) {\n        called = true;\n        handlers.reject(promise, error);\n      }\n    });\n  }\n}\n\n},{\"1\":1}],3:[function(_dereq_,module,exports){\n(function (global){\n'use strict';\nif (typeof global.Promise !== 'function') {\n  global.Promise = _dereq_(2);\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"2\":2}],4:[function(_dereq_,module,exports){\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction getIDB() {\n    /* global indexedDB,webkitIndexedDB,mozIndexedDB,OIndexedDB,msIndexedDB */\n    try {\n        if (typeof indexedDB !== 'undefined') {\n            return indexedDB;\n        }\n        if (typeof webkitIndexedDB !== 'undefined') {\n            return webkitIndexedDB;\n        }\n        if (typeof mozIndexedDB !== 'undefined') {\n            return mozIndexedDB;\n        }\n        if (typeof OIndexedDB !== 'undefined') {\n            return OIndexedDB;\n        }\n        if (typeof msIndexedDB !== 'undefined') {\n            return msIndexedDB;\n        }\n    } catch (e) {\n        return;\n    }\n}\n\nvar idb = getIDB();\n\nfunction isIndexedDBValid() {\n    try {\n        // Initialize IndexedDB; fall back to vendor-prefixed versions\n        // if needed.\n        if (!idb || !idb.open) {\n            return false;\n        }\n        // We mimic PouchDB here;\n        //\n        // We test for openDatabase because IE Mobile identifies itself\n        // as Safari. Oh the lulz...\n        var isSafari = typeof openDatabase !== 'undefined' && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform);\n\n        var hasFetch = typeof fetch === 'function' && fetch.toString().indexOf('[native code') !== -1;\n\n        // Safari <10.1 does not meet our requirements for IDB support\n        // (see: https://github.com/pouchdb/pouchdb/issues/5572).\n        // Safari 10.1 shipped with fetch, we can use that to detect it.\n        // Note: this creates issues with `window.fetch` polyfills and\n        // overrides; see:\n        // https://github.com/localForage/localForage/issues/856\n        return (!isSafari || hasFetch) && typeof indexedDB !== 'undefined' &&\n        // some outdated implementations of IDB that appear on Samsung\n        // and HTC Android devices <4.4 are missing IDBKeyRange\n        // See: https://github.com/mozilla/localForage/issues/128\n        // See: https://github.com/mozilla/localForage/issues/272\n        typeof IDBKeyRange !== 'undefined';\n    } catch (e) {\n        return false;\n    }\n}\n\n// Abstracts constructing a Blob object, so it also works in older\n// browsers that don't support the native Blob constructor. (i.e.\n// old QtWebKit versions, at least).\n// Abstracts constructing a Blob object, so it also works in older\n// browsers that don't support the native Blob constructor. (i.e.\n// old QtWebKit versions, at least).\nfunction createBlob(parts, properties) {\n    /* global BlobBuilder,MSBlobBuilder,MozBlobBuilder,WebKitBlobBuilder */\n    parts = parts || [];\n    properties = properties || {};\n    try {\n        return new Blob(parts, properties);\n    } catch (e) {\n        if (e.name !== 'TypeError') {\n            throw e;\n        }\n        var Builder = typeof BlobBuilder !== 'undefined' ? BlobBuilder : typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder : typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : WebKitBlobBuilder;\n        var builder = new Builder();\n        for (var i = 0; i < parts.length; i += 1) {\n            builder.append(parts[i]);\n        }\n        return builder.getBlob(properties.type);\n    }\n}\n\n// This is CommonJS because lie is an external dependency, so Rollup\n// can just ignore it.\nif (typeof Promise === 'undefined') {\n    // In the \"nopromises\" build this will just throw if you don't have\n    // a global promise object, but it would throw anyway later.\n    _dereq_(3);\n}\nvar Promise$1 = Promise;\n\nfunction executeCallback(promise, callback) {\n    if (callback) {\n        promise.then(function (result) {\n            callback(null, result);\n        }, function (error) {\n            callback(error);\n        });\n    }\n}\n\nfunction executeTwoCallbacks(promise, callback, errorCallback) {\n    if (typeof callback === 'function') {\n        promise.then(callback);\n    }\n\n    if (typeof errorCallback === 'function') {\n        promise[\"catch\"](errorCallback);\n    }\n}\n\nfunction normalizeKey(key) {\n    // Cast the key to a string, as that's all we can set as a key.\n    if (typeof key !== 'string') {\n        console.warn(key + ' used as a key, but it is not a string.');\n        key = String(key);\n    }\n\n    return key;\n}\n\nfunction getCallback() {\n    if (arguments.length && typeof arguments[arguments.length - 1] === 'function') {\n        return arguments[arguments.length - 1];\n    }\n}\n\n// Some code originally from async_storage.js in\n// [Gaia](https://github.com/mozilla-b2g/gaia).\n\nvar DETECT_BLOB_SUPPORT_STORE = 'local-forage-detect-blob-support';\nvar supportsBlobs = void 0;\nvar dbContexts = {};\nvar toString = Object.prototype.toString;\n\n// Transaction Modes\nvar READ_ONLY = 'readonly';\nvar READ_WRITE = 'readwrite';\n\n// Transform a binary string to an array buffer, because otherwise\n// weird stuff happens when you try to work with the binary string directly.\n// It is known.\n// From http://stackoverflow.com/questions/14967647/ (continues on next line)\n// encode-decode-image-with-base64-breaks-image (2013-04-21)\nfunction _binStringToArrayBuffer(bin) {\n    var length = bin.length;\n    var buf = new ArrayBuffer(length);\n    var arr = new Uint8Array(buf);\n    for (var i = 0; i < length; i++) {\n        arr[i] = bin.charCodeAt(i);\n    }\n    return buf;\n}\n\n//\n// Blobs are not supported in all versions of IndexedDB, notably\n// Chrome <37 and Android <5. In those versions, storing a blob will throw.\n//\n// Various other blob bugs exist in Chrome v37-42 (inclusive).\n// Detecting them is expensive and confusing to users, and Chrome 37-42\n// is at very low usage worldwide, so we do a hacky userAgent check instead.\n//\n// content-type bug: https://code.google.com/p/chromium/issues/detail?id=408120\n// 404 bug: https://code.google.com/p/chromium/issues/detail?id=447916\n// FileReader bug: https://code.google.com/p/chromium/issues/detail?id=447836\n//\n// Code borrowed from PouchDB. See:\n// https://github.com/pouchdb/pouchdb/blob/master/packages/node_modules/pouchdb-adapter-idb/src/blobSupport.js\n//\nfunction _checkBlobSupportWithoutCaching(idb) {\n    return new Promise$1(function (resolve) {\n        var txn = idb.transaction(DETECT_BLOB_SUPPORT_STORE, READ_WRITE);\n        var blob = createBlob(['']);\n        txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob, 'key');\n\n        txn.onabort = function (e) {\n            // If the transaction aborts now its due to not being able to\n            // write to the database, likely due to the disk being full\n            e.preventDefault();\n            e.stopPropagation();\n            resolve(false);\n        };\n\n        txn.oncomplete = function () {\n            var matchedChrome = navigator.userAgent.match(/Chrome\\/(\\d+)/);\n            var matchedEdge = navigator.userAgent.match(/Edge\\//);\n            // MS Edge pretends to be Chrome 42:\n            // https://msdn.microsoft.com/en-us/library/hh869301%28v=vs.85%29.aspx\n            resolve(matchedEdge || !matchedChrome || parseInt(matchedChrome[1], 10) >= 43);\n        };\n    })[\"catch\"](function () {\n        return false; // error, so assume unsupported\n    });\n}\n\nfunction _checkBlobSupport(idb) {\n    if (typeof supportsBlobs === 'boolean') {\n        return Promise$1.resolve(supportsBlobs);\n    }\n    return _checkBlobSupportWithoutCaching(idb).then(function (value) {\n        supportsBlobs = value;\n        return supportsBlobs;\n    });\n}\n\nfunction _deferReadiness(dbInfo) {\n    var dbContext = dbContexts[dbInfo.name];\n\n    // Create a deferred object representing the current database operation.\n    var deferredOperation = {};\n\n    deferredOperation.promise = new Promise$1(function (resolve, reject) {\n        deferredOperation.resolve = resolve;\n        deferredOperation.reject = reject;\n    });\n\n    // Enqueue the deferred operation.\n    dbContext.deferredOperations.push(deferredOperation);\n\n    // Chain its promise to the database readiness.\n    if (!dbContext.dbReady) {\n        dbContext.dbReady = deferredOperation.promise;\n    } else {\n        dbContext.dbReady = dbContext.dbReady.then(function () {\n            return deferredOperation.promise;\n        });\n    }\n}\n\nfunction _advanceReadiness(dbInfo) {\n    var dbContext = dbContexts[dbInfo.name];\n\n    // Dequeue a deferred operation.\n    var deferredOperation = dbContext.deferredOperations.pop();\n\n    // Resolve its promise (which is part of the database readiness\n    // chain of promises).\n    if (deferredOperation) {\n        deferredOperation.resolve();\n        return deferredOperation.promise;\n    }\n}\n\nfunction _rejectReadiness(dbInfo, err) {\n    var dbContext = dbContexts[dbInfo.name];\n\n    // Dequeue a deferred operation.\n    var deferredOperation = dbContext.deferredOperations.pop();\n\n    // Reject its promise (which is part of the database readiness\n    // chain of promises).\n    if (deferredOperation) {\n        deferredOperation.reject(err);\n        return deferredOperation.promise;\n    }\n}\n\nfunction _getConnection(dbInfo, upgradeNeeded) {\n    return new Promise$1(function (resolve, reject) {\n        dbContexts[dbInfo.name] = dbContexts[dbInfo.name] || createDbContext();\n\n        if (dbInfo.db) {\n            if (upgradeNeeded) {\n                _deferReadiness(dbInfo);\n                dbInfo.db.close();\n            } else {\n                return resolve(dbInfo.db);\n            }\n        }\n\n        var dbArgs = [dbInfo.name];\n\n        if (upgradeNeeded) {\n            dbArgs.push(dbInfo.version);\n        }\n\n        var openreq = idb.open.apply(idb, dbArgs);\n\n        if (upgradeNeeded) {\n            openreq.onupgradeneeded = function (e) {\n                var db = openreq.result;\n                try {\n                    db.createObjectStore(dbInfo.storeName);\n                    if (e.oldVersion <= 1) {\n                        // Added when support for blob shims was added\n                        db.createObjectStore(DETECT_BLOB_SUPPORT_STORE);\n                    }\n                } catch (ex) {\n                    if (ex.name === 'ConstraintError') {\n                        console.warn('The database \"' + dbInfo.name + '\"' + ' has been upgraded from version ' + e.oldVersion + ' to version ' + e.newVersion + ', but the storage \"' + dbInfo.storeName + '\" already exists.');\n                    } else {\n                        throw ex;\n                    }\n                }\n            };\n        }\n\n        openreq.onerror = function (e) {\n            e.preventDefault();\n            reject(openreq.error);\n        };\n\n        openreq.onsuccess = function () {\n            resolve(openreq.result);\n            _advanceReadiness(dbInfo);\n        };\n    });\n}\n\nfunction _getOriginalConnection(dbInfo) {\n    return _getConnection(dbInfo, false);\n}\n\nfunction _getUpgradedConnection(dbInfo) {\n    return _getConnection(dbInfo, true);\n}\n\nfunction _isUpgradeNeeded(dbInfo, defaultVersion) {\n    if (!dbInfo.db) {\n        return true;\n    }\n\n    var isNewStore = !dbInfo.db.objectStoreNames.contains(dbInfo.storeName);\n    var isDowngrade = dbInfo.version < dbInfo.db.version;\n    var isUpgrade = dbInfo.version > dbInfo.db.version;\n\n    if (isDowngrade) {\n        // If the version is not the default one\n        // then warn for impossible downgrade.\n        if (dbInfo.version !== defaultVersion) {\n            console.warn('The database \"' + dbInfo.name + '\"' + \" can't be downgraded from version \" + dbInfo.db.version + ' to version ' + dbInfo.version + '.');\n        }\n        // Align the versions to prevent errors.\n        dbInfo.version = dbInfo.db.version;\n    }\n\n    if (isUpgrade || isNewStore) {\n        // If the store is new then increment the version (if needed).\n        // This will trigger an \"upgradeneeded\" event which is required\n        // for creating a store.\n        if (isNewStore) {\n            var incVersion = dbInfo.db.version + 1;\n            if (incVersion > dbInfo.version) {\n                dbInfo.version = incVersion;\n            }\n        }\n\n        return true;\n    }\n\n    return false;\n}\n\n// encode a blob for indexeddb engines that don't support blobs\nfunction _encodeBlob(blob) {\n    return new Promise$1(function (resolve, reject) {\n        var reader = new FileReader();\n        reader.onerror = reject;\n        reader.onloadend = function (e) {\n            var base64 = btoa(e.target.result || '');\n            resolve({\n                __local_forage_encoded_blob: true,\n                data: base64,\n                type: blob.type\n            });\n        };\n        reader.readAsBinaryString(blob);\n    });\n}\n\n// decode an encoded blob\nfunction _decodeBlob(encodedBlob) {\n    var arrayBuff = _binStringToArrayBuffer(atob(encodedBlob.data));\n    return createBlob([arrayBuff], { type: encodedBlob.type });\n}\n\n// is this one of our fancy encoded blobs?\nfunction _isEncodedBlob(value) {\n    return value && value.__local_forage_encoded_blob;\n}\n\n// Specialize the default `ready()` function by making it dependent\n// on the current database operations. Thus, the driver will be actually\n// ready when it's been initialized (default) *and* there are no pending\n// operations on the database (initiated by some other instances).\nfunction _fullyReady(callback) {\n    var self = this;\n\n    var promise = self._initReady().then(function () {\n        var dbContext = dbContexts[self._dbInfo.name];\n\n        if (dbContext && dbContext.dbReady) {\n            return dbContext.dbReady;\n        }\n    });\n\n    executeTwoCallbacks(promise, callback, callback);\n    return promise;\n}\n\n// Try to establish a new db connection to replace the\n// current one which is broken (i.e. experiencing\n// InvalidStateError while creating a transaction).\nfunction _tryReconnect(dbInfo) {\n    _deferReadiness(dbInfo);\n\n    var dbContext = dbContexts[dbInfo.name];\n    var forages = dbContext.forages;\n\n    for (var i = 0; i < forages.length; i++) {\n        var forage = forages[i];\n        if (forage._dbInfo.db) {\n            forage._dbInfo.db.close();\n            forage._dbInfo.db = null;\n        }\n    }\n    dbInfo.db = null;\n\n    return _getOriginalConnection(dbInfo).then(function (db) {\n        dbInfo.db = db;\n        if (_isUpgradeNeeded(dbInfo)) {\n            // Reopen the database for upgrading.\n            return _getUpgradedConnection(dbInfo);\n        }\n        return db;\n    }).then(function (db) {\n        // store the latest db reference\n        // in case the db was upgraded\n        dbInfo.db = dbContext.db = db;\n        for (var i = 0; i < forages.length; i++) {\n            forages[i]._dbInfo.db = db;\n        }\n    })[\"catch\"](function (err) {\n        _rejectReadiness(dbInfo, err);\n        throw err;\n    });\n}\n\n// FF doesn't like Promises (micro-tasks) and IDDB store operations,\n// so we have to do it with callbacks\nfunction createTransaction(dbInfo, mode, callback, retries) {\n    if (retries === undefined) {\n        retries = 1;\n    }\n\n    try {\n        var tx = dbInfo.db.transaction(dbInfo.storeName, mode);\n        callback(null, tx);\n    } catch (err) {\n        if (retries > 0 && (!dbInfo.db || err.name === 'InvalidStateError' || err.name === 'NotFoundError')) {\n            return Promise$1.resolve().then(function () {\n                if (!dbInfo.db || err.name === 'NotFoundError' && !dbInfo.db.objectStoreNames.contains(dbInfo.storeName) && dbInfo.version <= dbInfo.db.version) {\n                    // increase the db version, to create the new ObjectStore\n                    if (dbInfo.db) {\n                        dbInfo.version = dbInfo.db.version + 1;\n                    }\n                    // Reopen the database for upgrading.\n                    return _getUpgradedConnection(dbInfo);\n                }\n            }).then(function () {\n                return _tryReconnect(dbInfo).then(function () {\n                    createTransaction(dbInfo, mode, callback, retries - 1);\n                });\n            })[\"catch\"](callback);\n        }\n\n        callback(err);\n    }\n}\n\nfunction createDbContext() {\n    return {\n        // Running localForages sharing a database.\n        forages: [],\n        // Shared database.\n        db: null,\n        // Database readiness (promise).\n        dbReady: null,\n        // Deferred operations on the database.\n        deferredOperations: []\n    };\n}\n\n// Open the IndexedDB database (automatically creates one if one didn't\n// previously exist), using any options set in the config.\nfunction _initStorage(options) {\n    var self = this;\n    var dbInfo = {\n        db: null\n    };\n\n    if (options) {\n        for (var i in options) {\n            dbInfo[i] = options[i];\n        }\n    }\n\n    // Get the current context of the database;\n    var dbContext = dbContexts[dbInfo.name];\n\n    // ...or create a new context.\n    if (!dbContext) {\n        dbContext = createDbContext();\n        // Register the new context in the global container.\n        dbContexts[dbInfo.name] = dbContext;\n    }\n\n    // Register itself as a running localForage in the current context.\n    dbContext.forages.push(self);\n\n    // Replace the default `ready()` function with the specialized one.\n    if (!self._initReady) {\n        self._initReady = self.ready;\n        self.ready = _fullyReady;\n    }\n\n    // Create an array of initialization states of the related localForages.\n    var initPromises = [];\n\n    function ignoreErrors() {\n        // Don't handle errors here,\n        // just makes sure related localForages aren't pending.\n        return Promise$1.resolve();\n    }\n\n    for (var j = 0; j < dbContext.forages.length; j++) {\n        var forage = dbContext.forages[j];\n        if (forage !== self) {\n            // Don't wait for itself...\n            initPromises.push(forage._initReady()[\"catch\"](ignoreErrors));\n        }\n    }\n\n    // Take a snapshot of the related localForages.\n    var forages = dbContext.forages.slice(0);\n\n    // Initialize the connection process only when\n    // all the related localForages aren't pending.\n    return Promise$1.all(initPromises).then(function () {\n        dbInfo.db = dbContext.db;\n        // Get the connection or open a new one without upgrade.\n        return _getOriginalConnection(dbInfo);\n    }).then(function (db) {\n        dbInfo.db = db;\n        if (_isUpgradeNeeded(dbInfo, self._defaultConfig.version)) {\n            // Reopen the database for upgrading.\n            return _getUpgradedConnection(dbInfo);\n        }\n        return db;\n    }).then(function (db) {\n        dbInfo.db = dbContext.db = db;\n        self._dbInfo = dbInfo;\n        // Share the final connection amongst related localForages.\n        for (var k = 0; k < forages.length; k++) {\n            var forage = forages[k];\n            if (forage !== self) {\n                // Self is already up-to-date.\n                forage._dbInfo.db = dbInfo.db;\n                forage._dbInfo.version = dbInfo.version;\n            }\n        }\n    });\n}\n\nfunction getItem(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n                    var req = store.get(key);\n\n                    req.onsuccess = function () {\n                        var value = req.result;\n                        if (value === undefined) {\n                            value = null;\n                        }\n                        if (_isEncodedBlob(value)) {\n                            value = _decodeBlob(value);\n                        }\n                        resolve(value);\n                    };\n\n                    req.onerror = function () {\n                        reject(req.error);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Iterate over all items stored in database.\nfunction iterate(iterator, callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n                    var req = store.openCursor();\n                    var iterationNumber = 1;\n\n                    req.onsuccess = function () {\n                        var cursor = req.result;\n\n                        if (cursor) {\n                            var value = cursor.value;\n                            if (_isEncodedBlob(value)) {\n                                value = _decodeBlob(value);\n                            }\n                            var result = iterator(value, cursor.key, iterationNumber++);\n\n                            // when the iterator callback returns any\n                            // (non-`undefined`) value, then we stop\n                            // the iteration immediately\n                            if (result !== void 0) {\n                                resolve(result);\n                            } else {\n                                cursor[\"continue\"]();\n                            }\n                        } else {\n                            resolve();\n                        }\n                    };\n\n                    req.onerror = function () {\n                        reject(req.error);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n\n    return promise;\n}\n\nfunction setItem(key, value, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise$1(function (resolve, reject) {\n        var dbInfo;\n        self.ready().then(function () {\n            dbInfo = self._dbInfo;\n            if (toString.call(value) === '[object Blob]') {\n                return _checkBlobSupport(dbInfo.db).then(function (blobSupport) {\n                    if (blobSupport) {\n                        return value;\n                    }\n                    return _encodeBlob(value);\n                });\n            }\n            return value;\n        }).then(function (value) {\n            createTransaction(self._dbInfo, READ_WRITE, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n\n                    // The reason we don't _save_ null is because IE 10 does\n                    // not support saving the `null` type in IndexedDB. How\n                    // ironic, given the bug below!\n                    // See: https://github.com/mozilla/localForage/issues/161\n                    if (value === null) {\n                        value = undefined;\n                    }\n\n                    var req = store.put(value, key);\n\n                    transaction.oncomplete = function () {\n                        // Cast to undefined so the value passed to\n                        // callback/promise is the same as what one would get out\n                        // of `getItem()` later. This leads to some weirdness\n                        // (setItem('foo', undefined) will return `null`), but\n                        // it's not my fault localStorage is our baseline and that\n                        // it's weird.\n                        if (value === undefined) {\n                            value = null;\n                        }\n\n                        resolve(value);\n                    };\n                    transaction.onabort = transaction.onerror = function () {\n                        var err = req.error ? req.error : req.transaction.error;\n                        reject(err);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction removeItem(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            createTransaction(self._dbInfo, READ_WRITE, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n                    // We use a Grunt task to make this safe for IE and some\n                    // versions of Android (including those used by Cordova).\n                    // Normally IE won't like `.delete()` and will insist on\n                    // using `['delete']()`, but we have a build step that\n                    // fixes this for us now.\n                    var req = store[\"delete\"](key);\n                    transaction.oncomplete = function () {\n                        resolve();\n                    };\n\n                    transaction.onerror = function () {\n                        reject(req.error);\n                    };\n\n                    // The request will be also be aborted if we've exceeded our storage\n                    // space.\n                    transaction.onabort = function () {\n                        var err = req.error ? req.error : req.transaction.error;\n                        reject(err);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction clear(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            createTransaction(self._dbInfo, READ_WRITE, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n                    var req = store.clear();\n\n                    transaction.oncomplete = function () {\n                        resolve();\n                    };\n\n                    transaction.onabort = transaction.onerror = function () {\n                        var err = req.error ? req.error : req.transaction.error;\n                        reject(err);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction length(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n                    var req = store.count();\n\n                    req.onsuccess = function () {\n                        resolve(req.result);\n                    };\n\n                    req.onerror = function () {\n                        reject(req.error);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction key(n, callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        if (n < 0) {\n            resolve(null);\n\n            return;\n        }\n\n        self.ready().then(function () {\n            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n                    var advanced = false;\n                    var req = store.openKeyCursor();\n\n                    req.onsuccess = function () {\n                        var cursor = req.result;\n                        if (!cursor) {\n                            // this means there weren't enough keys\n                            resolve(null);\n\n                            return;\n                        }\n\n                        if (n === 0) {\n                            // We have the first key, return it if that's what they\n                            // wanted.\n                            resolve(cursor.key);\n                        } else {\n                            if (!advanced) {\n                                // Otherwise, ask the cursor to skip ahead n\n                                // records.\n                                advanced = true;\n                                cursor.advance(n);\n                            } else {\n                                // When we get here, we've got the nth key.\n                                resolve(cursor.key);\n                            }\n                        }\n                    };\n\n                    req.onerror = function () {\n                        reject(req.error);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction keys(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n                    var req = store.openKeyCursor();\n                    var keys = [];\n\n                    req.onsuccess = function () {\n                        var cursor = req.result;\n\n                        if (!cursor) {\n                            resolve(keys);\n                            return;\n                        }\n\n                        keys.push(cursor.key);\n                        cursor[\"continue\"]();\n                    };\n\n                    req.onerror = function () {\n                        reject(req.error);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction dropInstance(options, callback) {\n    callback = getCallback.apply(this, arguments);\n\n    var currentConfig = this.config();\n    options = typeof options !== 'function' && options || {};\n    if (!options.name) {\n        options.name = options.name || currentConfig.name;\n        options.storeName = options.storeName || currentConfig.storeName;\n    }\n\n    var self = this;\n    var promise;\n    if (!options.name) {\n        promise = Promise$1.reject('Invalid arguments');\n    } else {\n        var isCurrentDb = options.name === currentConfig.name && self._dbInfo.db;\n\n        var dbPromise = isCurrentDb ? Promise$1.resolve(self._dbInfo.db) : _getOriginalConnection(options).then(function (db) {\n            var dbContext = dbContexts[options.name];\n            var forages = dbContext.forages;\n            dbContext.db = db;\n            for (var i = 0; i < forages.length; i++) {\n                forages[i]._dbInfo.db = db;\n            }\n            return db;\n        });\n\n        if (!options.storeName) {\n            promise = dbPromise.then(function (db) {\n                _deferReadiness(options);\n\n                var dbContext = dbContexts[options.name];\n                var forages = dbContext.forages;\n\n                db.close();\n                for (var i = 0; i < forages.length; i++) {\n                    var forage = forages[i];\n                    forage._dbInfo.db = null;\n                }\n\n                var dropDBPromise = new Promise$1(function (resolve, reject) {\n                    var req = idb.deleteDatabase(options.name);\n\n                    req.onerror = req.onblocked = function (err) {\n                        var db = req.result;\n                        if (db) {\n                            db.close();\n                        }\n                        reject(err);\n                    };\n\n                    req.onsuccess = function () {\n                        var db = req.result;\n                        if (db) {\n                            db.close();\n                        }\n                        resolve(db);\n                    };\n                });\n\n                return dropDBPromise.then(function (db) {\n                    dbContext.db = db;\n                    for (var i = 0; i < forages.length; i++) {\n                        var _forage = forages[i];\n                        _advanceReadiness(_forage._dbInfo);\n                    }\n                })[\"catch\"](function (err) {\n                    (_rejectReadiness(options, err) || Promise$1.resolve())[\"catch\"](function () {});\n                    throw err;\n                });\n            });\n        } else {\n            promise = dbPromise.then(function (db) {\n                if (!db.objectStoreNames.contains(options.storeName)) {\n                    return;\n                }\n\n                var newVersion = db.version + 1;\n\n                _deferReadiness(options);\n\n                var dbContext = dbContexts[options.name];\n                var forages = dbContext.forages;\n\n                db.close();\n                for (var i = 0; i < forages.length; i++) {\n                    var forage = forages[i];\n                    forage._dbInfo.db = null;\n                    forage._dbInfo.version = newVersion;\n                }\n\n                var dropObjectPromise = new Promise$1(function (resolve, reject) {\n                    var req = idb.open(options.name, newVersion);\n\n                    req.onerror = function (err) {\n                        var db = req.result;\n                        db.close();\n                        reject(err);\n                    };\n\n                    req.onupgradeneeded = function () {\n                        var db = req.result;\n                        db.deleteObjectStore(options.storeName);\n                    };\n\n                    req.onsuccess = function () {\n                        var db = req.result;\n                        db.close();\n                        resolve(db);\n                    };\n                });\n\n                return dropObjectPromise.then(function (db) {\n                    dbContext.db = db;\n                    for (var j = 0; j < forages.length; j++) {\n                        var _forage2 = forages[j];\n                        _forage2._dbInfo.db = db;\n                        _advanceReadiness(_forage2._dbInfo);\n                    }\n                })[\"catch\"](function (err) {\n                    (_rejectReadiness(options, err) || Promise$1.resolve())[\"catch\"](function () {});\n                    throw err;\n                });\n            });\n        }\n    }\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nvar asyncStorage = {\n    _driver: 'asyncStorage',\n    _initStorage: _initStorage,\n    _support: isIndexedDBValid(),\n    iterate: iterate,\n    getItem: getItem,\n    setItem: setItem,\n    removeItem: removeItem,\n    clear: clear,\n    length: length,\n    key: key,\n    keys: keys,\n    dropInstance: dropInstance\n};\n\nfunction isWebSQLValid() {\n    return typeof openDatabase === 'function';\n}\n\n// Sadly, the best way to save binary data in WebSQL/localStorage is serializing\n// it to Base64, so this is how we store it to prevent very strange errors with less\n// verbose ways of binary <-> string data storage.\nvar BASE_CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\nvar BLOB_TYPE_PREFIX = '~~local_forage_type~';\nvar BLOB_TYPE_PREFIX_REGEX = /^~~local_forage_type~([^~]+)~/;\n\nvar SERIALIZED_MARKER = '__lfsc__:';\nvar SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER.length;\n\n// OMG the serializations!\nvar TYPE_ARRAYBUFFER = 'arbf';\nvar TYPE_BLOB = 'blob';\nvar TYPE_INT8ARRAY = 'si08';\nvar TYPE_UINT8ARRAY = 'ui08';\nvar TYPE_UINT8CLAMPEDARRAY = 'uic8';\nvar TYPE_INT16ARRAY = 'si16';\nvar TYPE_INT32ARRAY = 'si32';\nvar TYPE_UINT16ARRAY = 'ur16';\nvar TYPE_UINT32ARRAY = 'ui32';\nvar TYPE_FLOAT32ARRAY = 'fl32';\nvar TYPE_FLOAT64ARRAY = 'fl64';\nvar TYPE_SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER_LENGTH + TYPE_ARRAYBUFFER.length;\n\nvar toString$1 = Object.prototype.toString;\n\nfunction stringToBuffer(serializedString) {\n    // Fill the string into a ArrayBuffer.\n    var bufferLength = serializedString.length * 0.75;\n    var len = serializedString.length;\n    var i;\n    var p = 0;\n    var encoded1, encoded2, encoded3, encoded4;\n\n    if (serializedString[serializedString.length - 1] === '=') {\n        bufferLength--;\n        if (serializedString[serializedString.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n\n    var buffer = new ArrayBuffer(bufferLength);\n    var bytes = new Uint8Array(buffer);\n\n    for (i = 0; i < len; i += 4) {\n        encoded1 = BASE_CHARS.indexOf(serializedString[i]);\n        encoded2 = BASE_CHARS.indexOf(serializedString[i + 1]);\n        encoded3 = BASE_CHARS.indexOf(serializedString[i + 2]);\n        encoded4 = BASE_CHARS.indexOf(serializedString[i + 3]);\n\n        /*jslint bitwise: true */\n        bytes[p++] = encoded1 << 2 | encoded2 >> 4;\n        bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;\n        bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;\n    }\n    return buffer;\n}\n\n// Converts a buffer to a string to store, serialized, in the backend\n// storage library.\nfunction bufferToString(buffer) {\n    // base64-arraybuffer\n    var bytes = new Uint8Array(buffer);\n    var base64String = '';\n    var i;\n\n    for (i = 0; i < bytes.length; i += 3) {\n        /*jslint bitwise: true */\n        base64String += BASE_CHARS[bytes[i] >> 2];\n        base64String += BASE_CHARS[(bytes[i] & 3) << 4 | bytes[i + 1] >> 4];\n        base64String += BASE_CHARS[(bytes[i + 1] & 15) << 2 | bytes[i + 2] >> 6];\n        base64String += BASE_CHARS[bytes[i + 2] & 63];\n    }\n\n    if (bytes.length % 3 === 2) {\n        base64String = base64String.substring(0, base64String.length - 1) + '=';\n    } else if (bytes.length % 3 === 1) {\n        base64String = base64String.substring(0, base64String.length - 2) + '==';\n    }\n\n    return base64String;\n}\n\n// Serialize a value, afterwards executing a callback (which usually\n// instructs the `setItem()` callback/promise to be executed). This is how\n// we store binary data with localStorage.\nfunction serialize(value, callback) {\n    var valueType = '';\n    if (value) {\n        valueType = toString$1.call(value);\n    }\n\n    // Cannot use `value instanceof ArrayBuffer` or such here, as these\n    // checks fail when running the tests using casper.js...\n    //\n    // TODO: See why those tests fail and use a better solution.\n    if (value && (valueType === '[object ArrayBuffer]' || value.buffer && toString$1.call(value.buffer) === '[object ArrayBuffer]')) {\n        // Convert binary arrays to a string and prefix the string with\n        // a special marker.\n        var buffer;\n        var marker = SERIALIZED_MARKER;\n\n        if (value instanceof ArrayBuffer) {\n            buffer = value;\n            marker += TYPE_ARRAYBUFFER;\n        } else {\n            buffer = value.buffer;\n\n            if (valueType === '[object Int8Array]') {\n                marker += TYPE_INT8ARRAY;\n            } else if (valueType === '[object Uint8Array]') {\n                marker += TYPE_UINT8ARRAY;\n            } else if (valueType === '[object Uint8ClampedArray]') {\n                marker += TYPE_UINT8CLAMPEDARRAY;\n            } else if (valueType === '[object Int16Array]') {\n                marker += TYPE_INT16ARRAY;\n            } else if (valueType === '[object Uint16Array]') {\n                marker += TYPE_UINT16ARRAY;\n            } else if (valueType === '[object Int32Array]') {\n                marker += TYPE_INT32ARRAY;\n            } else if (valueType === '[object Uint32Array]') {\n                marker += TYPE_UINT32ARRAY;\n            } else if (valueType === '[object Float32Array]') {\n                marker += TYPE_FLOAT32ARRAY;\n            } else if (valueType === '[object Float64Array]') {\n                marker += TYPE_FLOAT64ARRAY;\n            } else {\n                callback(new Error('Failed to get type for BinaryArray'));\n            }\n        }\n\n        callback(marker + bufferToString(buffer));\n    } else if (valueType === '[object Blob]') {\n        // Conver the blob to a binaryArray and then to a string.\n        var fileReader = new FileReader();\n\n        fileReader.onload = function () {\n            // Backwards-compatible prefix for the blob type.\n            var str = BLOB_TYPE_PREFIX + value.type + '~' + bufferToString(this.result);\n\n            callback(SERIALIZED_MARKER + TYPE_BLOB + str);\n        };\n\n        fileReader.readAsArrayBuffer(value);\n    } else {\n        try {\n            callback(JSON.stringify(value));\n        } catch (e) {\n            console.error(\"Couldn't convert value into a JSON string: \", value);\n\n            callback(null, e);\n        }\n    }\n}\n\n// Deserialize data we've inserted into a value column/field. We place\n// special markers into our strings to mark them as encoded; this isn't\n// as nice as a meta field, but it's the only sane thing we can do whilst\n// keeping localStorage support intact.\n//\n// Oftentimes this will just deserialize JSON content, but if we have a\n// special marker (SERIALIZED_MARKER, defined above), we will extract\n// some kind of arraybuffer/binary data/typed array out of the string.\nfunction deserialize(value) {\n    // If we haven't marked this string as being specially serialized (i.e.\n    // something other than serialized JSON), we can just return it and be\n    // done with it.\n    if (value.substring(0, SERIALIZED_MARKER_LENGTH) !== SERIALIZED_MARKER) {\n        return JSON.parse(value);\n    }\n\n    // The following code deals with deserializing some kind of Blob or\n    // TypedArray. First we separate out the type of data we're dealing\n    // with from the data itself.\n    var serializedString = value.substring(TYPE_SERIALIZED_MARKER_LENGTH);\n    var type = value.substring(SERIALIZED_MARKER_LENGTH, TYPE_SERIALIZED_MARKER_LENGTH);\n\n    var blobType;\n    // Backwards-compatible blob type serialization strategy.\n    // DBs created with older versions of localForage will simply not have the blob type.\n    if (type === TYPE_BLOB && BLOB_TYPE_PREFIX_REGEX.test(serializedString)) {\n        var matcher = serializedString.match(BLOB_TYPE_PREFIX_REGEX);\n        blobType = matcher[1];\n        serializedString = serializedString.substring(matcher[0].length);\n    }\n    var buffer = stringToBuffer(serializedString);\n\n    // Return the right type based on the code/type set during\n    // serialization.\n    switch (type) {\n        case TYPE_ARRAYBUFFER:\n            return buffer;\n        case TYPE_BLOB:\n            return createBlob([buffer], { type: blobType });\n        case TYPE_INT8ARRAY:\n            return new Int8Array(buffer);\n        case TYPE_UINT8ARRAY:\n            return new Uint8Array(buffer);\n        case TYPE_UINT8CLAMPEDARRAY:\n            return new Uint8ClampedArray(buffer);\n        case TYPE_INT16ARRAY:\n            return new Int16Array(buffer);\n        case TYPE_UINT16ARRAY:\n            return new Uint16Array(buffer);\n        case TYPE_INT32ARRAY:\n            return new Int32Array(buffer);\n        case TYPE_UINT32ARRAY:\n            return new Uint32Array(buffer);\n        case TYPE_FLOAT32ARRAY:\n            return new Float32Array(buffer);\n        case TYPE_FLOAT64ARRAY:\n            return new Float64Array(buffer);\n        default:\n            throw new Error('Unkown type: ' + type);\n    }\n}\n\nvar localforageSerializer = {\n    serialize: serialize,\n    deserialize: deserialize,\n    stringToBuffer: stringToBuffer,\n    bufferToString: bufferToString\n};\n\n/*\n * Includes code from:\n *\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n\nfunction createDbTable(t, dbInfo, callback, errorCallback) {\n    t.executeSql('CREATE TABLE IF NOT EXISTS ' + dbInfo.storeName + ' ' + '(id INTEGER PRIMARY KEY, key unique, value)', [], callback, errorCallback);\n}\n\n// Open the WebSQL database (automatically creates one if one didn't\n// previously exist), using any options set in the config.\nfunction _initStorage$1(options) {\n    var self = this;\n    var dbInfo = {\n        db: null\n    };\n\n    if (options) {\n        for (var i in options) {\n            dbInfo[i] = typeof options[i] !== 'string' ? options[i].toString() : options[i];\n        }\n    }\n\n    var dbInfoPromise = new Promise$1(function (resolve, reject) {\n        // Open the database; the openDatabase API will automatically\n        // create it for us if it doesn't exist.\n        try {\n            dbInfo.db = openDatabase(dbInfo.name, String(dbInfo.version), dbInfo.description, dbInfo.size);\n        } catch (e) {\n            return reject(e);\n        }\n\n        // Create our key/value table if it doesn't exist.\n        dbInfo.db.transaction(function (t) {\n            createDbTable(t, dbInfo, function () {\n                self._dbInfo = dbInfo;\n                resolve();\n            }, function (t, error) {\n                reject(error);\n            });\n        }, reject);\n    });\n\n    dbInfo.serializer = localforageSerializer;\n    return dbInfoPromise;\n}\n\nfunction tryExecuteSql(t, dbInfo, sqlStatement, args, callback, errorCallback) {\n    t.executeSql(sqlStatement, args, callback, function (t, error) {\n        if (error.code === error.SYNTAX_ERR) {\n            t.executeSql('SELECT name FROM sqlite_master ' + \"WHERE type='table' AND name = ?\", [dbInfo.storeName], function (t, results) {\n                if (!results.rows.length) {\n                    // if the table is missing (was deleted)\n                    // re-create it table and retry\n                    createDbTable(t, dbInfo, function () {\n                        t.executeSql(sqlStatement, args, callback, errorCallback);\n                    }, errorCallback);\n                } else {\n                    errorCallback(t, error);\n                }\n            }, errorCallback);\n        } else {\n            errorCallback(t, error);\n        }\n    }, errorCallback);\n}\n\nfunction getItem$1(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                tryExecuteSql(t, dbInfo, 'SELECT * FROM ' + dbInfo.storeName + ' WHERE key = ? LIMIT 1', [key], function (t, results) {\n                    var result = results.rows.length ? results.rows.item(0).value : null;\n\n                    // Check to see if this is serialized content we need to\n                    // unpack.\n                    if (result) {\n                        result = dbInfo.serializer.deserialize(result);\n                    }\n\n                    resolve(result);\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction iterate$1(iterator, callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n\n            dbInfo.db.transaction(function (t) {\n                tryExecuteSql(t, dbInfo, 'SELECT * FROM ' + dbInfo.storeName, [], function (t, results) {\n                    var rows = results.rows;\n                    var length = rows.length;\n\n                    for (var i = 0; i < length; i++) {\n                        var item = rows.item(i);\n                        var result = item.value;\n\n                        // Check to see if this is serialized content\n                        // we need to unpack.\n                        if (result) {\n                            result = dbInfo.serializer.deserialize(result);\n                        }\n\n                        result = iterator(result, item.key, i + 1);\n\n                        // void(0) prevents problems with redefinition\n                        // of `undefined`.\n                        if (result !== void 0) {\n                            resolve(result);\n                            return;\n                        }\n                    }\n\n                    resolve();\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction _setItem(key, value, callback, retriesLeft) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            // The localStorage API doesn't return undefined values in an\n            // \"expected\" way, so undefined is always cast to null in all\n            // drivers. See: https://github.com/mozilla/localForage/pull/42\n            if (value === undefined) {\n                value = null;\n            }\n\n            // Save the original value to pass to the callback.\n            var originalValue = value;\n\n            var dbInfo = self._dbInfo;\n            dbInfo.serializer.serialize(value, function (value, error) {\n                if (error) {\n                    reject(error);\n                } else {\n                    dbInfo.db.transaction(function (t) {\n                        tryExecuteSql(t, dbInfo, 'INSERT OR REPLACE INTO ' + dbInfo.storeName + ' ' + '(key, value) VALUES (?, ?)', [key, value], function () {\n                            resolve(originalValue);\n                        }, function (t, error) {\n                            reject(error);\n                        });\n                    }, function (sqlError) {\n                        // The transaction failed; check\n                        // to see if it's a quota error.\n                        if (sqlError.code === sqlError.QUOTA_ERR) {\n                            // We reject the callback outright for now, but\n                            // it's worth trying to re-run the transaction.\n                            // Even if the user accepts the prompt to use\n                            // more storage on Safari, this error will\n                            // be called.\n                            //\n                            // Try to re-run the transaction.\n                            if (retriesLeft > 0) {\n                                resolve(_setItem.apply(self, [key, originalValue, callback, retriesLeft - 1]));\n                                return;\n                            }\n                            reject(sqlError);\n                        }\n                    });\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction setItem$1(key, value, callback) {\n    return _setItem.apply(this, [key, value, callback, 1]);\n}\n\nfunction removeItem$1(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                tryExecuteSql(t, dbInfo, 'DELETE FROM ' + dbInfo.storeName + ' WHERE key = ?', [key], function () {\n                    resolve();\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Deletes every item in the table.\n// TODO: Find out if this resets the AUTO_INCREMENT number.\nfunction clear$1(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                tryExecuteSql(t, dbInfo, 'DELETE FROM ' + dbInfo.storeName, [], function () {\n                    resolve();\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Does a simple `COUNT(key)` to get the number of items stored in\n// localForage.\nfunction length$1(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                // Ahhh, SQL makes this one soooooo easy.\n                tryExecuteSql(t, dbInfo, 'SELECT COUNT(key) as c FROM ' + dbInfo.storeName, [], function (t, results) {\n                    var result = results.rows.item(0).c;\n                    resolve(result);\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Return the key located at key index X; essentially gets the key from a\n// `WHERE id = ?`. This is the most efficient way I can think to implement\n// this rarely-used (in my experience) part of the API, but it can seem\n// inconsistent, because we do `INSERT OR REPLACE INTO` on `setItem()`, so\n// the ID of each key will change every time it's updated. Perhaps a stored\n// procedure for the `setItem()` SQL would solve this problem?\n// TODO: Don't change ID on `setItem()`.\nfunction key$1(n, callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                tryExecuteSql(t, dbInfo, 'SELECT key FROM ' + dbInfo.storeName + ' WHERE id = ? LIMIT 1', [n + 1], function (t, results) {\n                    var result = results.rows.length ? results.rows.item(0).key : null;\n                    resolve(result);\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction keys$1(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                tryExecuteSql(t, dbInfo, 'SELECT key FROM ' + dbInfo.storeName, [], function (t, results) {\n                    var keys = [];\n\n                    for (var i = 0; i < results.rows.length; i++) {\n                        keys.push(results.rows.item(i).key);\n                    }\n\n                    resolve(keys);\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// https://www.w3.org/TR/webdatabase/#databases\n// > There is no way to enumerate or delete the databases available for an origin from this API.\nfunction getAllStoreNames(db) {\n    return new Promise$1(function (resolve, reject) {\n        db.transaction(function (t) {\n            t.executeSql('SELECT name FROM sqlite_master ' + \"WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'\", [], function (t, results) {\n                var storeNames = [];\n\n                for (var i = 0; i < results.rows.length; i++) {\n                    storeNames.push(results.rows.item(i).name);\n                }\n\n                resolve({\n                    db: db,\n                    storeNames: storeNames\n                });\n            }, function (t, error) {\n                reject(error);\n            });\n        }, function (sqlError) {\n            reject(sqlError);\n        });\n    });\n}\n\nfunction dropInstance$1(options, callback) {\n    callback = getCallback.apply(this, arguments);\n\n    var currentConfig = this.config();\n    options = typeof options !== 'function' && options || {};\n    if (!options.name) {\n        options.name = options.name || currentConfig.name;\n        options.storeName = options.storeName || currentConfig.storeName;\n    }\n\n    var self = this;\n    var promise;\n    if (!options.name) {\n        promise = Promise$1.reject('Invalid arguments');\n    } else {\n        promise = new Promise$1(function (resolve) {\n            var db;\n            if (options.name === currentConfig.name) {\n                // use the db reference of the current instance\n                db = self._dbInfo.db;\n            } else {\n                db = openDatabase(options.name, '', '', 0);\n            }\n\n            if (!options.storeName) {\n                // drop all database tables\n                resolve(getAllStoreNames(db));\n            } else {\n                resolve({\n                    db: db,\n                    storeNames: [options.storeName]\n                });\n            }\n        }).then(function (operationInfo) {\n            return new Promise$1(function (resolve, reject) {\n                operationInfo.db.transaction(function (t) {\n                    function dropTable(storeName) {\n                        return new Promise$1(function (resolve, reject) {\n                            t.executeSql('DROP TABLE IF EXISTS ' + storeName, [], function () {\n                                resolve();\n                            }, function (t, error) {\n                                reject(error);\n                            });\n                        });\n                    }\n\n                    var operations = [];\n                    for (var i = 0, len = operationInfo.storeNames.length; i < len; i++) {\n                        operations.push(dropTable(operationInfo.storeNames[i]));\n                    }\n\n                    Promise$1.all(operations).then(function () {\n                        resolve();\n                    })[\"catch\"](function (e) {\n                        reject(e);\n                    });\n                }, function (sqlError) {\n                    reject(sqlError);\n                });\n            });\n        });\n    }\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nvar webSQLStorage = {\n    _driver: 'webSQLStorage',\n    _initStorage: _initStorage$1,\n    _support: isWebSQLValid(),\n    iterate: iterate$1,\n    getItem: getItem$1,\n    setItem: setItem$1,\n    removeItem: removeItem$1,\n    clear: clear$1,\n    length: length$1,\n    key: key$1,\n    keys: keys$1,\n    dropInstance: dropInstance$1\n};\n\nfunction isLocalStorageValid() {\n    try {\n        return typeof localStorage !== 'undefined' && 'setItem' in localStorage &&\n        // in IE8 typeof localStorage.setItem === 'object'\n        !!localStorage.setItem;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction _getKeyPrefix(options, defaultConfig) {\n    var keyPrefix = options.name + '/';\n\n    if (options.storeName !== defaultConfig.storeName) {\n        keyPrefix += options.storeName + '/';\n    }\n    return keyPrefix;\n}\n\n// Check if localStorage throws when saving an item\nfunction checkIfLocalStorageThrows() {\n    var localStorageTestKey = '_localforage_support_test';\n\n    try {\n        localStorage.setItem(localStorageTestKey, true);\n        localStorage.removeItem(localStorageTestKey);\n\n        return false;\n    } catch (e) {\n        return true;\n    }\n}\n\n// Check if localStorage is usable and allows to save an item\n// This method checks if localStorage is usable in Safari Private Browsing\n// mode, or in any other case where the available quota for localStorage\n// is 0 and there wasn't any saved items yet.\nfunction _isLocalStorageUsable() {\n    return !checkIfLocalStorageThrows() || localStorage.length > 0;\n}\n\n// Config the localStorage backend, using options set in the config.\nfunction _initStorage$2(options) {\n    var self = this;\n    var dbInfo = {};\n    if (options) {\n        for (var i in options) {\n            dbInfo[i] = options[i];\n        }\n    }\n\n    dbInfo.keyPrefix = _getKeyPrefix(options, self._defaultConfig);\n\n    if (!_isLocalStorageUsable()) {\n        return Promise$1.reject();\n    }\n\n    self._dbInfo = dbInfo;\n    dbInfo.serializer = localforageSerializer;\n\n    return Promise$1.resolve();\n}\n\n// Remove all keys from the datastore, effectively destroying all data in\n// the app's key/value store!\nfunction clear$2(callback) {\n    var self = this;\n    var promise = self.ready().then(function () {\n        var keyPrefix = self._dbInfo.keyPrefix;\n\n        for (var i = localStorage.length - 1; i >= 0; i--) {\n            var key = localStorage.key(i);\n\n            if (key.indexOf(keyPrefix) === 0) {\n                localStorage.removeItem(key);\n            }\n        }\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Retrieve an item from the store. Unlike the original async_storage\n// library in Gaia, we don't modify return values at all. If a key's value\n// is `undefined`, we pass that value to the callback function.\nfunction getItem$2(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        var result = localStorage.getItem(dbInfo.keyPrefix + key);\n\n        // If a result was found, parse it from the serialized\n        // string into a JS object. If result isn't truthy, the key\n        // is likely undefined and we'll pass it straight to the\n        // callback.\n        if (result) {\n            result = dbInfo.serializer.deserialize(result);\n        }\n\n        return result;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Iterate over all items in the store.\nfunction iterate$2(iterator, callback) {\n    var self = this;\n\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        var keyPrefix = dbInfo.keyPrefix;\n        var keyPrefixLength = keyPrefix.length;\n        var length = localStorage.length;\n\n        // We use a dedicated iterator instead of the `i` variable below\n        // so other keys we fetch in localStorage aren't counted in\n        // the `iterationNumber` argument passed to the `iterate()`\n        // callback.\n        //\n        // See: github.com/mozilla/localForage/pull/435#discussion_r38061530\n        var iterationNumber = 1;\n\n        for (var i = 0; i < length; i++) {\n            var key = localStorage.key(i);\n            if (key.indexOf(keyPrefix) !== 0) {\n                continue;\n            }\n            var value = localStorage.getItem(key);\n\n            // If a result was found, parse it from the serialized\n            // string into a JS object. If result isn't truthy, the\n            // key is likely undefined and we'll pass it straight\n            // to the iterator.\n            if (value) {\n                value = dbInfo.serializer.deserialize(value);\n            }\n\n            value = iterator(value, key.substring(keyPrefixLength), iterationNumber++);\n\n            if (value !== void 0) {\n                return value;\n            }\n        }\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Same as localStorage's key() method, except takes a callback.\nfunction key$2(n, callback) {\n    var self = this;\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        var result;\n        try {\n            result = localStorage.key(n);\n        } catch (error) {\n            result = null;\n        }\n\n        // Remove the prefix from the key, if a key is found.\n        if (result) {\n            result = result.substring(dbInfo.keyPrefix.length);\n        }\n\n        return result;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction keys$2(callback) {\n    var self = this;\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        var length = localStorage.length;\n        var keys = [];\n\n        for (var i = 0; i < length; i++) {\n            var itemKey = localStorage.key(i);\n            if (itemKey.indexOf(dbInfo.keyPrefix) === 0) {\n                keys.push(itemKey.substring(dbInfo.keyPrefix.length));\n            }\n        }\n\n        return keys;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Supply the number of keys in the datastore to the callback function.\nfunction length$2(callback) {\n    var self = this;\n    var promise = self.keys().then(function (keys) {\n        return keys.length;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Remove an item from the store, nice and simple.\nfunction removeItem$2(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        localStorage.removeItem(dbInfo.keyPrefix + key);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Set a key's value and run an optional callback once the value is set.\n// Unlike Gaia's implementation, the callback function is passed the value,\n// in case you want to operate on that value only after you're sure it\n// saved, or something like that.\nfunction setItem$2(key, value, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = self.ready().then(function () {\n        // Convert undefined values to null.\n        // https://github.com/mozilla/localForage/pull/42\n        if (value === undefined) {\n            value = null;\n        }\n\n        // Save the original value to pass to the callback.\n        var originalValue = value;\n\n        return new Promise$1(function (resolve, reject) {\n            var dbInfo = self._dbInfo;\n            dbInfo.serializer.serialize(value, function (value, error) {\n                if (error) {\n                    reject(error);\n                } else {\n                    try {\n                        localStorage.setItem(dbInfo.keyPrefix + key, value);\n                        resolve(originalValue);\n                    } catch (e) {\n                        // localStorage capacity exceeded.\n                        // TODO: Make this a specific error/event.\n                        if (e.name === 'QuotaExceededError' || e.name === 'NS_ERROR_DOM_QUOTA_REACHED') {\n                            reject(e);\n                        }\n                        reject(e);\n                    }\n                }\n            });\n        });\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction dropInstance$2(options, callback) {\n    callback = getCallback.apply(this, arguments);\n\n    options = typeof options !== 'function' && options || {};\n    if (!options.name) {\n        var currentConfig = this.config();\n        options.name = options.name || currentConfig.name;\n        options.storeName = options.storeName || currentConfig.storeName;\n    }\n\n    var self = this;\n    var promise;\n    if (!options.name) {\n        promise = Promise$1.reject('Invalid arguments');\n    } else {\n        promise = new Promise$1(function (resolve) {\n            if (!options.storeName) {\n                resolve(options.name + '/');\n            } else {\n                resolve(_getKeyPrefix(options, self._defaultConfig));\n            }\n        }).then(function (keyPrefix) {\n            for (var i = localStorage.length - 1; i >= 0; i--) {\n                var key = localStorage.key(i);\n\n                if (key.indexOf(keyPrefix) === 0) {\n                    localStorage.removeItem(key);\n                }\n            }\n        });\n    }\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nvar localStorageWrapper = {\n    _driver: 'localStorageWrapper',\n    _initStorage: _initStorage$2,\n    _support: isLocalStorageValid(),\n    iterate: iterate$2,\n    getItem: getItem$2,\n    setItem: setItem$2,\n    removeItem: removeItem$2,\n    clear: clear$2,\n    length: length$2,\n    key: key$2,\n    keys: keys$2,\n    dropInstance: dropInstance$2\n};\n\nvar sameValue = function sameValue(x, y) {\n    return x === y || typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y);\n};\n\nvar includes = function includes(array, searchElement) {\n    var len = array.length;\n    var i = 0;\n    while (i < len) {\n        if (sameValue(array[i], searchElement)) {\n            return true;\n        }\n        i++;\n    }\n\n    return false;\n};\n\nvar isArray = Array.isArray || function (arg) {\n    return Object.prototype.toString.call(arg) === '[object Array]';\n};\n\n// Drivers are stored here when `defineDriver()` is called.\n// They are shared across all instances of localForage.\nvar DefinedDrivers = {};\n\nvar DriverSupport = {};\n\nvar DefaultDrivers = {\n    INDEXEDDB: asyncStorage,\n    WEBSQL: webSQLStorage,\n    LOCALSTORAGE: localStorageWrapper\n};\n\nvar DefaultDriverOrder = [DefaultDrivers.INDEXEDDB._driver, DefaultDrivers.WEBSQL._driver, DefaultDrivers.LOCALSTORAGE._driver];\n\nvar OptionalDriverMethods = ['dropInstance'];\n\nvar LibraryMethods = ['clear', 'getItem', 'iterate', 'key', 'keys', 'length', 'removeItem', 'setItem'].concat(OptionalDriverMethods);\n\nvar DefaultConfig = {\n    description: '',\n    driver: DefaultDriverOrder.slice(),\n    name: 'localforage',\n    // Default DB size is _JUST UNDER_ 5MB, as it's the highest size\n    // we can use without a prompt.\n    size: 4980736,\n    storeName: 'keyvaluepairs',\n    version: 1.0\n};\n\nfunction callWhenReady(localForageInstance, libraryMethod) {\n    localForageInstance[libraryMethod] = function () {\n        var _args = arguments;\n        return localForageInstance.ready().then(function () {\n            return localForageInstance[libraryMethod].apply(localForageInstance, _args);\n        });\n    };\n}\n\nfunction extend() {\n    for (var i = 1; i < arguments.length; i++) {\n        var arg = arguments[i];\n\n        if (arg) {\n            for (var _key in arg) {\n                if (arg.hasOwnProperty(_key)) {\n                    if (isArray(arg[_key])) {\n                        arguments[0][_key] = arg[_key].slice();\n                    } else {\n                        arguments[0][_key] = arg[_key];\n                    }\n                }\n            }\n        }\n    }\n\n    return arguments[0];\n}\n\nvar LocalForage = function () {\n    function LocalForage(options) {\n        _classCallCheck(this, LocalForage);\n\n        for (var driverTypeKey in DefaultDrivers) {\n            if (DefaultDrivers.hasOwnProperty(driverTypeKey)) {\n                var driver = DefaultDrivers[driverTypeKey];\n                var driverName = driver._driver;\n                this[driverTypeKey] = driverName;\n\n                if (!DefinedDrivers[driverName]) {\n                    // we don't need to wait for the promise,\n                    // since the default drivers can be defined\n                    // in a blocking manner\n                    this.defineDriver(driver);\n                }\n            }\n        }\n\n        this._defaultConfig = extend({}, DefaultConfig);\n        this._config = extend({}, this._defaultConfig, options);\n        this._driverSet = null;\n        this._initDriver = null;\n        this._ready = false;\n        this._dbInfo = null;\n\n        this._wrapLibraryMethodsWithReady();\n        this.setDriver(this._config.driver)[\"catch\"](function () {});\n    }\n\n    // Set any config values for localForage; can be called anytime before\n    // the first API call (e.g. `getItem`, `setItem`).\n    // We loop through options so we don't overwrite existing config\n    // values.\n\n\n    LocalForage.prototype.config = function config(options) {\n        // If the options argument is an object, we use it to set values.\n        // Otherwise, we return either a specified config value or all\n        // config values.\n        if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n            // If localforage is ready and fully initialized, we can't set\n            // any new configuration values. Instead, we return an error.\n            if (this._ready) {\n                return new Error(\"Can't call config() after localforage \" + 'has been used.');\n            }\n\n            for (var i in options) {\n                if (i === 'storeName') {\n                    options[i] = options[i].replace(/\\W/g, '_');\n                }\n\n                if (i === 'version' && typeof options[i] !== 'number') {\n                    return new Error('Database version must be a number.');\n                }\n\n                this._config[i] = options[i];\n            }\n\n            // after all config options are set and\n            // the driver option is used, try setting it\n            if ('driver' in options && options.driver) {\n                return this.setDriver(this._config.driver);\n            }\n\n            return true;\n        } else if (typeof options === 'string') {\n            return this._config[options];\n        } else {\n            return this._config;\n        }\n    };\n\n    // Used to define a custom driver, shared across all instances of\n    // localForage.\n\n\n    LocalForage.prototype.defineDriver = function defineDriver(driverObject, callback, errorCallback) {\n        var promise = new Promise$1(function (resolve, reject) {\n            try {\n                var driverName = driverObject._driver;\n                var complianceError = new Error('Custom driver not compliant; see ' + 'https://mozilla.github.io/localForage/#definedriver');\n\n                // A driver name should be defined and not overlap with the\n                // library-defined, default drivers.\n                if (!driverObject._driver) {\n                    reject(complianceError);\n                    return;\n                }\n\n                var driverMethods = LibraryMethods.concat('_initStorage');\n                for (var i = 0, len = driverMethods.length; i < len; i++) {\n                    var driverMethodName = driverMethods[i];\n\n                    // when the property is there,\n                    // it should be a method even when optional\n                    var isRequired = !includes(OptionalDriverMethods, driverMethodName);\n                    if ((isRequired || driverObject[driverMethodName]) && typeof driverObject[driverMethodName] !== 'function') {\n                        reject(complianceError);\n                        return;\n                    }\n                }\n\n                var configureMissingMethods = function configureMissingMethods() {\n                    var methodNotImplementedFactory = function methodNotImplementedFactory(methodName) {\n                        return function () {\n                            var error = new Error('Method ' + methodName + ' is not implemented by the current driver');\n                            var promise = Promise$1.reject(error);\n                            executeCallback(promise, arguments[arguments.length - 1]);\n                            return promise;\n                        };\n                    };\n\n                    for (var _i = 0, _len = OptionalDriverMethods.length; _i < _len; _i++) {\n                        var optionalDriverMethod = OptionalDriverMethods[_i];\n                        if (!driverObject[optionalDriverMethod]) {\n                            driverObject[optionalDriverMethod] = methodNotImplementedFactory(optionalDriverMethod);\n                        }\n                    }\n                };\n\n                configureMissingMethods();\n\n                var setDriverSupport = function setDriverSupport(support) {\n                    if (DefinedDrivers[driverName]) {\n                        console.info('Redefining LocalForage driver: ' + driverName);\n                    }\n                    DefinedDrivers[driverName] = driverObject;\n                    DriverSupport[driverName] = support;\n                    // don't use a then, so that we can define\n                    // drivers that have simple _support methods\n                    // in a blocking manner\n                    resolve();\n                };\n\n                if ('_support' in driverObject) {\n                    if (driverObject._support && typeof driverObject._support === 'function') {\n                        driverObject._support().then(setDriverSupport, reject);\n                    } else {\n                        setDriverSupport(!!driverObject._support);\n                    }\n                } else {\n                    setDriverSupport(true);\n                }\n            } catch (e) {\n                reject(e);\n            }\n        });\n\n        executeTwoCallbacks(promise, callback, errorCallback);\n        return promise;\n    };\n\n    LocalForage.prototype.driver = function driver() {\n        return this._driver || null;\n    };\n\n    LocalForage.prototype.getDriver = function getDriver(driverName, callback, errorCallback) {\n        var getDriverPromise = DefinedDrivers[driverName] ? Promise$1.resolve(DefinedDrivers[driverName]) : Promise$1.reject(new Error('Driver not found.'));\n\n        executeTwoCallbacks(getDriverPromise, callback, errorCallback);\n        return getDriverPromise;\n    };\n\n    LocalForage.prototype.getSerializer = function getSerializer(callback) {\n        var serializerPromise = Promise$1.resolve(localforageSerializer);\n        executeTwoCallbacks(serializerPromise, callback);\n        return serializerPromise;\n    };\n\n    LocalForage.prototype.ready = function ready(callback) {\n        var self = this;\n\n        var promise = self._driverSet.then(function () {\n            if (self._ready === null) {\n                self._ready = self._initDriver();\n            }\n\n            return self._ready;\n        });\n\n        executeTwoCallbacks(promise, callback, callback);\n        return promise;\n    };\n\n    LocalForage.prototype.setDriver = function setDriver(drivers, callback, errorCallback) {\n        var self = this;\n\n        if (!isArray(drivers)) {\n            drivers = [drivers];\n        }\n\n        var supportedDrivers = this._getSupportedDrivers(drivers);\n\n        function setDriverToConfig() {\n            self._config.driver = self.driver();\n        }\n\n        function extendSelfWithDriver(driver) {\n            self._extend(driver);\n            setDriverToConfig();\n\n            self._ready = self._initStorage(self._config);\n            return self._ready;\n        }\n\n        function initDriver(supportedDrivers) {\n            return function () {\n                var currentDriverIndex = 0;\n\n                function driverPromiseLoop() {\n                    while (currentDriverIndex < supportedDrivers.length) {\n                        var driverName = supportedDrivers[currentDriverIndex];\n                        currentDriverIndex++;\n\n                        self._dbInfo = null;\n                        self._ready = null;\n\n                        return self.getDriver(driverName).then(extendSelfWithDriver)[\"catch\"](driverPromiseLoop);\n                    }\n\n                    setDriverToConfig();\n                    var error = new Error('No available storage method found.');\n                    self._driverSet = Promise$1.reject(error);\n                    return self._driverSet;\n                }\n\n                return driverPromiseLoop();\n            };\n        }\n\n        // There might be a driver initialization in progress\n        // so wait for it to finish in order to avoid a possible\n        // race condition to set _dbInfo\n        var oldDriverSetDone = this._driverSet !== null ? this._driverSet[\"catch\"](function () {\n            return Promise$1.resolve();\n        }) : Promise$1.resolve();\n\n        this._driverSet = oldDriverSetDone.then(function () {\n            var driverName = supportedDrivers[0];\n            self._dbInfo = null;\n            self._ready = null;\n\n            return self.getDriver(driverName).then(function (driver) {\n                self._driver = driver._driver;\n                setDriverToConfig();\n                self._wrapLibraryMethodsWithReady();\n                self._initDriver = initDriver(supportedDrivers);\n            });\n        })[\"catch\"](function () {\n            setDriverToConfig();\n            var error = new Error('No available storage method found.');\n            self._driverSet = Promise$1.reject(error);\n            return self._driverSet;\n        });\n\n        executeTwoCallbacks(this._driverSet, callback, errorCallback);\n        return this._driverSet;\n    };\n\n    LocalForage.prototype.supports = function supports(driverName) {\n        return !!DriverSupport[driverName];\n    };\n\n    LocalForage.prototype._extend = function _extend(libraryMethodsAndProperties) {\n        extend(this, libraryMethodsAndProperties);\n    };\n\n    LocalForage.prototype._getSupportedDrivers = function _getSupportedDrivers(drivers) {\n        var supportedDrivers = [];\n        for (var i = 0, len = drivers.length; i < len; i++) {\n            var driverName = drivers[i];\n            if (this.supports(driverName)) {\n                supportedDrivers.push(driverName);\n            }\n        }\n        return supportedDrivers;\n    };\n\n    LocalForage.prototype._wrapLibraryMethodsWithReady = function _wrapLibraryMethodsWithReady() {\n        // Add a stub for each driver API method that delays the call to the\n        // corresponding driver method until localForage is ready. These stubs\n        // will be replaced by the driver methods as soon as the driver is\n        // loaded, so there is no performance impact.\n        for (var i = 0, len = LibraryMethods.length; i < len; i++) {\n            callWhenReady(this, LibraryMethods[i]);\n        }\n    };\n\n    LocalForage.prototype.createInstance = function createInstance(options) {\n        return new LocalForage(options);\n    };\n\n    return LocalForage;\n}();\n\n// The actual localForage object that we expose as a module or via a\n// global. It's extended by pulling in one of our other libraries.\n\n\nvar localforage_js = new LocalForage();\n\nmodule.exports = localforage_js;\n\n},{\"3\":3}]},{},[4])(4)\n});\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SharedServiceClient = void 0;\nvar events_1 = require(\"events\");\nvar Transport_1 = require(\"./Transport\");\nvar actionTypes_1 = require(\"./actionTypes\");\nvar SharedServiceClient = /** @class */ (function (_super) {\n    __extends(SharedServiceClient, _super);\n    function SharedServiceClient(_a) {\n        var worker = _a.worker;\n        var _this = _super.call(this) || this;\n        _this._worker = worker;\n        _this._transport = new Transport_1.Transport({ port: worker.port });\n        _this._transport.on(_this._transport.events.push, function (message) {\n            if (message.action === actionTypes_1.actionTypes.setState) {\n                _this.emit(message.key, message.state);\n            }\n        });\n        worker.port.start();\n        window.addEventListener('unload', function () {\n            _this._transport.push({\n                payload: {\n                    action: actionTypes_1.actionTypes.close,\n                }\n            });\n        });\n        return _this;\n    }\n    SharedServiceClient.prototype.subscribe = function (key, func) {\n        var _this = this;\n        this.on(key, func);\n        return function () {\n            _this.off(key, func);\n            _this._transport.push({\n                payload: {\n                    action: actionTypes_1.actionTypes.unsubscribe,\n                    key: key,\n                }\n            });\n        };\n    };\n    SharedServiceClient.prototype.setState = function (key, state) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._transport.request({\n                            payload: {\n                                action: actionTypes_1.actionTypes.setState,\n                                key: key,\n                                state: state,\n                            }\n                        })];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SharedServiceClient.prototype.getState = function (key) {\n        return __awaiter(this, void 0, void 0, function () {\n            var state;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._transport.request({\n                            payload: {\n                                action: actionTypes_1.actionTypes.getState,\n                                key: key,\n                            }\n                        })];\n                    case 1:\n                        state = _a.sent();\n                        return [2 /*return*/, state];\n                }\n            });\n        });\n    };\n    SharedServiceClient.prototype.execute = function (funcName, args) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this._transport.request({\n                        payload: {\n                            action: actionTypes_1.actionTypes.execute,\n                            funcName: funcName,\n                            args: args,\n                        }\n                    })];\n            });\n        });\n    };\n    return SharedServiceClient;\n}(events_1.EventEmitter));\nexports.SharedServiceClient = SharedServiceClient;\n//# sourceMappingURL=SharedServiceClient.js.map","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/uuidjs/uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SharedServiceWorker = void 0;\nvar SharedServiceServer_1 = require(\"./SharedServiceServer\");\nvar SharedServiceWorker = /** @class */ (function (_super) {\n    __extends(SharedServiceWorker, _super);\n    function SharedServiceWorker() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SharedServiceWorker.prototype.onConnect = function (e) {\n        this.onNewPort(e.ports[0]);\n    };\n    return SharedServiceWorker;\n}(SharedServiceServer_1.SharedServiceServer));\nexports.SharedServiceWorker = SharedServiceWorker;\n//# sourceMappingURL=SharedServiceWorker.js.map","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import { SharedServiceWorker } from '@shared-service/core';\nimport localforage from 'localforage';\n\nconsole.log('TODO demo with SharedService');\n\nconst sharedServiceServer = new SharedServiceWorker({\n  tasks: [\n    { id: 0, name: \"Eat\", completed: true },\n    { id: 1, name: \"Sleep\", completed: false },\n    { id: 2, name: \"Repeat\", completed: false }\n  ],\n  taskInput: '',\n});\n// eslint-disable-next-line no-restricted-globals\nself.$sharedServiceServer = sharedServiceServer;\n\n// Connect sharedService with SharedWorker onconnect API\n// eslint-disable-next-line no-restricted-globals\nself.onconnect = function(e) {\n  sharedServiceServer.onConnect(e);\n};\n\n// Register executors\nsharedServiceServer.registerExecutor('addTask', () => {\n  const taskInput = sharedServiceServer.getState('taskInput');\n  if (!taskInput) {\n    return;\n  }\n  const tasks = sharedServiceServer.getState('tasks');\n  const newTask = { id: Date.now(), name: taskInput, completed: false };\n  sharedServiceServer.setState('tasks', [...tasks, newTask]);\n  sharedServiceServer.setState('taskInput', '');\n});\nsharedServiceServer.registerExecutor('updateTaskCompleted', (id, completed) => {\n  const tasks = sharedServiceServer.getState('tasks');\n  const updatedTasks = tasks.map(task => {\n    if (id === task.id) {\n      return {...task, completed }\n    }\n    return task;\n  });\n  sharedServiceServer.setState('tasks', updatedTasks);\n});\nsharedServiceServer.registerExecutor('deleteTask', (id) => {\n  const tasks = sharedServiceServer.getState('tasks');\n  const remainingTasks = tasks.filter(task => id !== task.id);\n  sharedServiceServer.setState('tasks', remainingTasks);\n});\nsharedServiceServer.registerExecutor('editTask', (id, newName) => {\n  const tasks = sharedServiceServer.getState('tasks');\n  const editedTaskList = tasks.map(task => {\n    // if this task has the same ID as the edited task\n    if (id === task.id) {\n      //\n      return {...task, name: newName}\n    }\n    return task;\n  });\n  sharedServiceServer.setState('tasks', editedTaskList);\n});\n\nasync function initStorage() {\n  const storage = localforage.createInstance({\n    name: 'todoData',\n  });\n  await storage.ready();\n  const keys = await storage.keys();\n  const promises = keys.map((key) =>\n    storage.getItem(key).then((data) => {\n      sharedServiceServer.setState(key, data);\n    }),\n  );\n  await Promise.all(promises);\n  sharedServiceServer.on('stateChange', ({ key, state }) => {\n    storage.setItem(key, state);\n  });\n}\n\ninitStorage();\n"],"sourceRoot":""}