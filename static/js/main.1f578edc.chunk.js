(this["webpackJsonp@shared-service/demo"]=this["webpackJsonp@shared-service/demo"]||[]).push([[0],{26:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(83),t)},41:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.actionTypes=void 0,t.actionTypes={close:"action/close",getState:"action/getState",setState:"action/setState",unsubscribe:"action/unsubscribe",execute:"action/execute"}},50:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Transport=void 0;var s=o(r(87)),i=r(40),a=r(60),c=function(e){function t(t){var r=t.port,n=t.timeout,o=void 0===n?15e3:n,s=e.call(this)||this;return s._onMessage=function(e){var t=e.data;if(t.type!==s.events.request)if(t.type!==s.events.response)t.type===s.events.push&&s.emit(s.events.push,t.payload);else{var r=t.requestId;if(r&&s._requests.has(r)){var n=t.error;if(n)s._requests.get(r).reject(new Error(n));else{var o=t.result;s._requests.get(r).resolve(o)}}}else s.emit(s.events.request,{requestId:t.requestId,payload:t.payload})},s._timeout=o,s._port=r,s._requests=new Map,s._port.addEventListener("message",s._onMessage),s}return n(t,e),t.prototype.request=function(e){var t=this,r=e.payload,n=s.default.v4(),o=new Promise((function(e,o){t._requests.set(n,{resolve:e,reject:o}),t._port.postMessage({type:t.events.request,payload:r,requestId:n})})),i=setTimeout((function(){i=null,t._requests.get(n).reject(new Error(t.events.timeout))}),this._timeout);return o=o.then((function(e){return void 0!==i&&null!==i&&clearTimeout(i),t._requests.delete(n),Promise.resolve(e)})).catch((function(e){return void 0!==i&&null!==i&&clearTimeout(i),t._requests.delete(n),Promise.reject(e)}))},t.prototype.response=function(e){var t=e.requestId,r=e.result,n=e.error;this._port.postMessage({type:this.events.response,requestId:t,result:r,error:n})},t.prototype.push=function(e){var t=e.payload;this._port.postMessage({type:this.events.push,payload:t})},t.prototype.dispose=function(){this._requests=new Map,this._port.removeEventListener("message",this._onMessage)},Object.defineProperty(t.prototype,"events",{get:function(){return a.eventTypes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"port",{get:function(){return this._port},enumerable:!1,configurable:!0}),t}(i.EventEmitter);t.Transport=c},60:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.eventTypes=void 0,t.eventTypes={request:"transport/request",response:"transport/response",push:"transport/push",timeout:"transport/timeout"}},61:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(a){s=[6,a],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SharedServiceServer=void 0;var i=r(40),a=r(62),c=r(41),u=function(e){function t(t){var r=e.call(this)||this;return r._ports=[],r._executors={},r._state=t||{},r}return n(t,e),t.prototype.onNewPort=function(e){var t=this,r=new a.ClientPort(e);this._ports.push(r),r.on(c.actionTypes.close,(function(){t._ports=t._ports.filter((function(e){return e!==r})),r.removeAllListeners(),r.dispose()})),r.on(c.actionTypes.getState,(function(e){var n=e.key,o=e.requestId,s=t.getState(n);r.response({requestId:o,result:s,error:null})})),r.on(c.actionTypes.setState,(function(e){var n=e.key,o=e.state,s=e.requestId;t.setState(n,o),r.response({requestId:s,result:"ok",error:null})})),r.on(c.actionTypes.execute,(function(e){var n=e.funcName,i=e.args,a=e.requestId;return o(t,void 0,void 0,(function(){var e,t,o,c;return s(this,(function(s){switch(s.label){case 0:if(!(e=this._executors[n]))return r.response({requestId:a,result:null,error:"Function not found"}),[2];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,e.apply(void 0,i)];case 2:return t=s.sent(),[3,4];case 3:return c=s.sent(),o=c.message,[3,4];case 4:return r.response({requestId:a,result:t,error:o}),[2]}}))}))}))},t.prototype.getState=function(e){return this._state[e]},t.prototype.setState=function(e,t){"string"===typeof e&&(this._state[e]=t,this._ports.forEach((function(r){r.pushState(e,t)})),this.emit("stateChange",{key:e,state:t}))},t.prototype.registerExecutor=function(e,t){if(this._executors[e])throw new Error(e+" is registered.");this._executors[e]=t},t.prototype.unregisterExecutor=function(e){delete this._executors[e]},t.prototype.dispose=function(){this._executors={},this._ports.forEach((function(e){e.removeAllListeners(),e.dispose()})),this._ports=[]},t}(i.EventEmitter);t.SharedServiceServer=u},62:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ClientPort=void 0;var o=r(40),s=r(50),i=r(41),a=function(e){function t(t){var r=e.call(this)||this;return r._subscribedStateKeys={},r._transport=new s.Transport({port:t}),r._transport.on(r._transport.events.push,(function(e){e.action===i.actionTypes.close&&r.emit(i.actionTypes.close),e.action===i.actionTypes.unsubscribe&&delete r._subscribedStateKeys[e.key]})),r._transport.on(r._transport.events.request,(function(e){r._handleRequest(e)})),t.start(),r}return n(t,e),t.prototype._handleRequest=function(e){var t=e.payload;if(t.action===i.actionTypes.getState)return this._subscribedStateKeys[t.key]=!0,void this.emit(i.actionTypes.getState,{key:t.key,requestId:e.requestId});t.action!==i.actionTypes.setState?t.action===i.actionTypes.execute&&this.emit(i.actionTypes.execute,{funcName:t.funcName,args:t.args,requestId:e.requestId}):this.emit(i.actionTypes.setState,{key:t.key,state:t.state,requestId:e.requestId})},t.prototype.response=function(e){var t=e.requestId,r=e.result,n=e.error;this._transport.response({requestId:t,result:r,error:n})},t.prototype.dispose=function(){this._transport.removeAllListeners(),this._transport.dispose(),this._transport=null},t.prototype.pushState=function(e,t){this._subscribedStateKeys[e]&&this._transport.push({payload:{action:i.actionTypes.setState,key:e,state:t}})},t}(o.EventEmitter);t.ClientPort=a},67:function(e,t,r){"use strict";var n=r(30),o=r(0),s=r(37),i=r(148),a=r(150),c=r(151),u=r(149),l=r(152),p=r(147),f=r(145),d=r(137),h=r(26),y=r(140),v=r(142),_=r(146),b=r(144),j=r(153),m=r(143),O=r(66),S=r.n(O),x=r(65),g=r.n(x),w=r(64),k=r.n(w),T=r(7),q=Object(d.a)({itemText:{paddingRight:"50px"},text:{cursor:"pointer"}});var P=function(e){var t=e.id,r=e.name,o=e.completed,i=e.handleCompleteChange,a=e.deleteTask,u=e.editTask,l=q(),p=Object(h.useSharedState)("editing-".concat(t),!1),f=Object(n.a)(p,2),d=f[0],O=f[1],x=Object(h.useSharedState)("editingName-".concat(t),r),w=Object(n.a)(x,2),P=w[0],C=w[1],E=function(){P&&(P!==r&&u(P),O(!1))};return Object(T.jsxs)(y.a,{children:[Object(T.jsx)(v.a,{children:Object(T.jsx)(j.a,{edge:"start",checked:o,tabIndex:-1,disableRipple:!0,onChange:i})}),Object(T.jsx)(b.a,{className:l.itemText,children:d?Object(T.jsx)(c.a,{variant:"outlined",multiline:!0,fullWidth:!0,onChange:function(e){C(e.target.value)},value:P}):Object(T.jsx)(s.a,{onClick:function(){return O(!0)},className:l.text,children:r})}),Object(T.jsx)(_.a,{children:d?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(m.a,{edge:"end","aria-label":"Cancel",onClick:E,children:Object(T.jsx)(k.a,{})}),Object(T.jsx)(m.a,{edge:"end","aria-label":"Save",onClick:E,children:Object(T.jsx)(g.a,{})})]}):Object(T.jsx)(m.a,{edge:"end","aria-label":"Delete",onClick:a,children:Object(T.jsx)(S.a,{})})})]})},C=Object(d.a)({root:{paddingTop:"20px",display:"flex",flexDirection:"column",minHeight:"100%"},form:{paddingTop:"20px",display:"flex",flexDirection:"column",alignItems:"flex-end"},remaining:{padding:"20px 0"},list:{flex:1}}),E={All:function(){return!0},Active:function(e){return!e.completed},Completed:function(e){return e.completed}},I=Object.keys(E);t.a=function(){var e=Object(h.useSharedState)("tasks",[]),t=Object(n.a)(e,1)[0],r=Object(h.useSharedState)("taskInput",""),d=Object(n.a)(r,2),y=d[0],v=d[1],_=Object(o.useState)(0),b=Object(n.a)(_,2),j=b[0],m=b[1],O=C(),S=t.filter(E[I[j]]),x=S.map((function(e){return Object(T.jsx)(P,{id:e.id,name:e.name,completed:e.completed,handleCompleteChange:function(t){var r,n;r=e.id,n=t.target.checked,$sharedService.execute("updateTaskCompleted",[r,n])},deleteTask:function(){var t;t=e.id,$sharedService.execute("deleteTask",[t])},editTask:function(t){var r,n;r=e.id,n=t,$sharedService.execute("editTask",[r,n])}},e.id)})),g=I.map((function(e){return Object(T.jsx)(p.a,{label:e},e)}));return Object(T.jsxs)(i.a,{maxWidth:"sm",className:O.root,children:[Object(T.jsx)(s.a,{variant:"h4",component:"h1",children:"My TODO List"}),Object(T.jsxs)("form",{className:O.form,children:[Object(T.jsx)(c.a,{value:y,onChange:function(e){v(e.target.value)},label:"TODO",placeholder:"What needs to be done?",fullWidth:!0,multiline:!0,minRows:3,maxRows:10,margin:"normal",variant:"outlined"}),Object(T.jsx)(u.a,{variant:"contained",color:"primary",onClick:function(){return $sharedService.execute("addTask")},children:"Add"})]}),Object(T.jsx)(l.a,{value:j,indicatorColor:"primary",textColor:"primary",onChange:function(e,t){m(t)},"aria-label":"TODO filter",children:g}),Object(T.jsxs)(s.a,{variant:"h6",component:"h6",className:O.remaining,children:[S.length," tasks remaining"]}),Object(T.jsx)(f.a,{className:O.list,children:x}),Object(T.jsxs)(s.a,{variant:"body2",color:"textSecondary",align:"center",children:["Powered by \xa0",Object(T.jsx)(a.a,{href:"https://github.com/shared-service/shared-service",target:"_blank",children:"Shared Service"})]})]})}},69:function(e,t,r){"use strict";r.r(t),function(e){var t=r(0),n=r.n(t),o=r(10),s=r.n(o),i=r(26),a=r(67),c=r(7);if("undefined"!==typeof SharedWorker){var u=new SharedWorker(e,void 0);Object(i.initSharedService)(u)}s.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(a.a,{})}),document.getElementById("root"))}.call(this,r(78))},78:function(e,t,r){e.exports=r.p+"static/js/0.8b44e87b.chunk.worker.js"},83:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.useSharedState=t.initSharedService=void 0;var n,o,s=r(0),i=r(85);"undefined"!==typeof window&&(o=window),"undefined"!==typeof e&&(o=e.window||e),t.initSharedService=function(e){n=new i.SharedServiceClient({worker:e}),o.$sharedService=n},t.useSharedState=function(e,t){var r=s.useState(t),o=r[0],i=r[1];return n?(s.useEffect((function(){n.getState(e).then((function(e){e&&i(e)})).catch((function(e){console.error(e)}));return n.subscribe(e,(function(e){i(e)}))}),[]),[o,function(t){return n.setState(e,t)}]):(console.warn("Share service is not initialized."),[o,i])}}).call(this,r(84))},85:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(86),t),o(r(61),t),o(r(90),t),o(r(62),t),o(r(41),t),o(r(60),t),o(r(91),t),o(r(50),t)},86:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(a){s=[6,a],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SharedServiceClient=void 0;var i=r(40),a=r(50),c=r(41),u=function(e){function t(t){var r=t.worker,n=e.call(this)||this;return n._worker=r,n._transport=new a.Transport({port:r.port}),n._transport.on(n._transport.events.push,(function(e){e.action===c.actionTypes.setState&&n.emit(e.key,e.state)})),r.port.start(),window.addEventListener("unload",(function(){n._transport.push({payload:{action:c.actionTypes.close}})})),n}return n(t,e),t.prototype.subscribe=function(e,t){var r=this;return this.on(e,t),function(){r.off(e,t),r._transport.push({payload:{action:c.actionTypes.unsubscribe,key:e}})}},t.prototype.setState=function(e,t){return o(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,this._transport.request({payload:{action:c.actionTypes.setState,key:e,state:t}})];case 1:return r.sent(),[2]}}))}))},t.prototype.getState=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this._transport.request({payload:{action:c.actionTypes.getState,key:e}})];case 1:return[2,t.sent()]}}))}))},t.prototype.execute=function(e,t){return o(this,void 0,void 0,(function(){return s(this,(function(r){return[2,this._transport.request({payload:{action:c.actionTypes.execute,funcName:e,args:t}})]}))}))},t}(i.EventEmitter);t.SharedServiceClient=u},90:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.SharedServiceWorker=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onConnect=function(e){this.onNewPort(e.ports[0])},t}(r(61).SharedServiceServer);t.SharedServiceWorker=o},91:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}},[[69,1,2]]]);
//# sourceMappingURL=main.1f578edc.chunk.js.map