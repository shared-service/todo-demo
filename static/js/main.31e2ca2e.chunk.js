(this["webpackJsonp@shared-service/demo"]=this["webpackJsonp@shared-service/demo"]||[]).push([[0],{26:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(87),t)},43:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.actionTypes=void 0,t.actionTypes={close:"Close",getState:"GetState",setState:"SetState",unsubscribe:"Unsubscribe"}},53:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Transport=void 0;var i=o(n(90)),s=n(42),a=n(63),c=function(e){function t(t){var n=t.port,r=t.timeout,o=void 0===r?15e3:r,i=e.call(this)||this;return i._onMessage=function(e){var t=e.data;if(t.type!==i.events.request)if(t.type!==i.events.response)t.type===i.events.push&&i.emit(i.events.push,t.payload);else{var n=t.requestId;if(n&&i._requests.has(n)){var r=t.error;if(r)i._requests.get(n).reject(new Error(r));else{var o=t.result;i._requests.get(n).resolve(o)}}}else i.emit(i.events.request,{requestId:t.requestId,payload:t.payload})},i._timeout=o,i._port=n,i._requests=new Map,i._port.addEventListener("message",i._onMessage),i}return r(t,e),t.prototype.request=function(e){var t=this,n=e.payload,r=i.default.v4(),o=new Promise((function(e,o){t._requests.set(r,{resolve:e,reject:o}),t._port.postMessage({type:t.events.request,payload:n,requestId:r})})),s=setTimeout((function(){s=null,t._requests.get(r).reject(new Error(t.events.timeout))}),this._timeout);return o=o.then((function(e){return void 0!==s&&null!==s&&clearTimeout(s),t._requests.delete(r),Promise.resolve(e)})).catch((function(e){return void 0!==s&&null!==s&&clearTimeout(s),t._requests.delete(r),Promise.reject(e)}))},t.prototype.response=function(e){var t=e.requestId,n=e.result,r=e.error;this._port.postMessage({type:this.events.response,requestId:t,result:n,error:r})},t.prototype.push=function(e){var t=e.payload;this._port.postMessage({type:this.events.push,payload:t})},t.prototype.dispose=function(){this._requests=new Map,this._port.removeEventListener("message",this._onMessage)},Object.defineProperty(t.prototype,"events",{get:function(){return a.eventTypes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"port",{get:function(){return this._port},enumerable:!1,configurable:!0}),t}(s.EventEmitter);t.Transport=c},63:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.eventTypes=void 0,t.eventTypes={request:"shared/request",response:"shared/response",push:"shared/push",timeout:"shared/timeout"}},64:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.SharedServiceServer=void 0;var o=n(42),i=n(65),s=n(43),a=function(e){function t(t){var n=e.call(this)||this;return n._ports=[],n._state=t||{},n}return r(t,e),t.prototype.onNewPort=function(e){var t=this,n=new i.ClientPort(e);this._ports.push(n),n.on(s.actionTypes.close,(function(){t._ports=t._ports.filter((function(e){return e!==n})),n.removeAllListeners(),n.dispose()})),n.on(s.actionTypes.getState,(function(e){var r=e.key,o=e.requestId,i=t.getState(r);n.response({requestId:o,result:i,error:null})})),n.on(s.actionTypes.setState,(function(e){var r=e.key,o=e.state,i=e.requestId;t.setState(r,o),n.response({requestId:i,result:"ok",error:null})}))},t.prototype.getState=function(e){return this._state[e]},t.prototype.setState=function(e,t){"string"===typeof e&&(this._state[e]=t,this._ports.forEach((function(n){n.pushState(e,t)})),this.emit("stateChange",{key:e,state:t}))},t}(o.EventEmitter);t.SharedServiceServer=a},65:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ClientPort=void 0;var o=n(42),i=n(53),s=n(43),a=function(e){function t(t){var n=e.call(this)||this;return n._subscribedStateKeys={},n._transport=new i.Transport({port:t}),n._transport.on(n._transport.events.push,(function(e){e.action===s.actionTypes.close&&n.emit(s.actionTypes.close),e.action===s.actionTypes.unsubscribe&&delete n._subscribedStateKeys[e.key]})),n._transport.on(n._transport.events.request,(function(e){n._handleRequest(e)})),t.start(),n}return r(t,e),t.prototype._handleRequest=function(e){var t=e.payload;if(t.action===s.actionTypes.getState)return this._subscribedStateKeys[t.key]=!0,void this.emit(s.actionTypes.getState,{key:t.key,requestId:e.requestId});t.action!==s.actionTypes.setState||this.emit(s.actionTypes.setState,{key:t.key,state:t.state,requestId:e.requestId})},t.prototype.response=function(e){var t=e.requestId,n=e.result,r=e.error;this._transport.response({requestId:t,result:n,error:r})},t.prototype.dispose=function(){this._transport.removeAllListeners(),this._transport.dispose(),this._transport=null},t.prototype.pushState=function(e,t){this._subscribedStateKeys[e]&&this._transport.push({payload:{action:s.actionTypes.setState,key:e,state:t}})},t}(o.EventEmitter);t.ClientPort=a},71:function(e,t,n){"use strict";var r=n(38),o=n(70),i=n(30),s=n(0),a=n(39),c=n(151),u=n(153),l=n(154),p=n(152),d=n(155),f=n(150),h=n(148),y=n(140),v=n(26),_=n(143),b=n(145),j=n(149),O=n(147),m=n(156),S=n(146),g=n(69),x=n.n(g),w=n(68),k=n.n(w),T=n(67),P=n.n(T),q=n(7),C=Object(y.a)({itemText:{paddingRight:"50px"},text:{cursor:"pointer"}});var E=function(e){var t=e.id,n=e.name,r=e.completed,o=e.handleCompleteChange,s=e.deleteTask,c=e.editTask,u=C(),p=Object(v.useSharedState)("editing-".concat(t),!1),d=Object(i.a)(p,2),f=d[0],h=d[1],y=Object(v.useSharedState)("editingName-".concat(t),n),g=Object(i.a)(y,2),w=g[0],T=g[1],E=function(){w&&(w!==n&&c(w),h(!1))};return Object(q.jsxs)(_.a,{children:[Object(q.jsx)(b.a,{children:Object(q.jsx)(m.a,{edge:"start",checked:r,tabIndex:-1,disableRipple:!0,onChange:o})}),Object(q.jsx)(O.a,{className:u.itemText,children:f?Object(q.jsx)(l.a,{variant:"outlined",multiline:!0,fullWidth:!0,onChange:function(e){T(e.target.value)},value:w}):Object(q.jsx)(a.a,{onClick:function(){return h(!0)},className:u.text,children:n})}),Object(q.jsx)(j.a,{children:f?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(S.a,{edge:"end","aria-label":"Cancel",onClick:E,children:Object(q.jsx)(P.a,{})}),Object(q.jsx)(S.a,{edge:"end","aria-label":"Save",onClick:E,children:Object(q.jsx)(k.a,{})})]}):Object(q.jsx)(S.a,{edge:"end","aria-label":"Delete",onClick:s,children:Object(q.jsx)(x.a,{})})})]})},M=Object(y.a)({root:{paddingTop:"20px",display:"flex",flexDirection:"column",minHeight:"100%"},form:{paddingTop:"20px",display:"flex",flexDirection:"column",alignItems:"flex-end"},remaining:{padding:"20px 0"},list:{flex:1}}),I={All:function(){return!0},Active:function(e){return!e.completed},Completed:function(e){return e.completed}},A=Object.keys(I);t.a=function(){var e=Object(v.useSharedState)("tasks",[]),t=Object(i.a)(e,2),n=t[0],y=t[1],_=Object(v.useSharedState)("taskInput",""),b=Object(i.a)(_,2),j=b[0],O=b[1],m=Object(s.useState)(0),S=Object(i.a)(m,2),g=S[0],x=S[1],w=M(),k=n.filter(I[A[g]]),T=k.map((function(e){return Object(q.jsx)(E,{id:e.id,name:e.name,completed:e.completed,handleCompleteChange:function(t){!function(e,t){var o=n.map((function(n){return e===n.id?Object(r.a)(Object(r.a)({},n),{},{completed:t}):n}));y(o)}(e.id,t.target.checked)},deleteTask:function(){!function(e){var t=n.filter((function(t){return e!==t.id}));y(t)}(e.id)},editTask:function(t){!function(e,t){var o=n.map((function(n){return e===n.id?Object(r.a)(Object(r.a)({},n),{},{name:t}):n}));y(o)}(e.id,t)}},e.id)})),P=A.map((function(e){return Object(q.jsx)(f.a,{label:e},e)}));return Object(q.jsxs)(c.a,{maxWidth:"sm",className:w.root,children:[Object(q.jsx)(a.a,{variant:"h4",component:"h1",children:"My TODO List"}),Object(q.jsxs)("form",{className:w.form,children:[Object(q.jsx)(l.a,{value:j,onChange:function(e){O(e.target.value)},label:"TODO",placeholder:"What needs to be done?",fullWidth:!0,multiline:!0,minRows:3,maxRows:10,margin:"normal",variant:"outlined"}),Object(q.jsx)(p.a,{variant:"contained",color:"primary",onClick:function(){if(j){var e={id:Date.now(),name:j,completed:!1};y([].concat(Object(o.a)(n),[e])),O("")}},children:"Add"})]}),Object(q.jsx)(d.a,{value:g,indicatorColor:"primary",textColor:"primary",onChange:function(e,t){x(t)},"aria-label":"TODO filter",children:P}),Object(q.jsxs)(a.a,{variant:"h6",component:"h6",className:w.remaining,children:[k.length," tasks remaining"]}),Object(q.jsx)(h.a,{className:w.list,children:T}),Object(q.jsxs)(a.a,{variant:"body2",color:"textSecondary",align:"center",children:["Powered by \xa0",Object(q.jsx)(u.a,{href:"https://github.com/shared-service/shared-service",target:"_blank",children:"Shared Service"})]})]})}},73:function(e,t,n){"use strict";n.r(t),function(e){var t=n(0),r=n.n(t),o=n(10),i=n.n(o),s=n(26),a=n(71),c=n(7);if("undefined"!==typeof SharedWorker){var u=new SharedWorker(e,void 0);Object(s.initSharedService)(u)}i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(a.a,{})}),document.getElementById("root"))}.call(this,n(82))},82:function(e,t,n){e.exports=n.p+"static/js/0.68bcbb20.chunk.worker.js"},87:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSharedState=t.initSharedService=void 0;var r,o=n(0),i=n(88);t.initSharedService=function(e){r=new i.SharedServiceClient({worker:e})},t.useSharedState=function(e,t){var n=o.useState(t),i=n[0],s=n[1];return r?(o.useEffect((function(){r.getState(e).then((function(e){e&&s(e)})).catch((function(e){console.error(e)}));return r.subscribe(e,(function(e){s(e)}))}),[]),[i,function(t){return r.setState(e,t)}]):(console.warn("Share service is not initialized."),[i,s])}},88:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(89),t),o(n(64),t),o(n(93),t),o(n(65),t),o(n(43),t),o(n(63),t),o(n(94),t),o(n(53),t)},89:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SharedServiceClient=void 0;var s=n(42),a=n(53),c=n(43),u=function(e){function t(t){var n=t.worker,r=e.call(this)||this;return r._worker=n,r._transport=new a.Transport({port:n.port}),r._transport.on(r._transport.events.push,(function(e){e.action===c.actionTypes.setState&&r.emit(e.key,e.state)})),n.port.start(),window.addEventListener("unload",(function(){r._transport.push({payload:{action:c.actionTypes.close}})})),r}return r(t,e),t.prototype.subscribe=function(e,t){var n=this;return this.on(e,t),function(){n.off(e,t),n._transport.push({payload:{action:c.actionTypes.unsubscribe,key:e}})}},t.prototype.setState=function(e,t){return o(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,this._transport.request({payload:{action:c.actionTypes.setState,key:e,state:t}})];case 1:return n.sent(),[2]}}))}))},t.prototype.getState=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this._transport.request({payload:{action:c.actionTypes.getState,key:e}})];case 1:return[2,t.sent()]}}))}))},t}(s.EventEmitter);t.SharedServiceClient=u},93:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.SharedServiceWorker=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onConnect=function(e){this.onNewPort(e.ports[0])},t}(n(64).SharedServiceServer);t.SharedServiceWorker=o},94:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}},[[73,1,2]]]);
//# sourceMappingURL=main.31e2ca2e.chunk.js.map